<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 3 - Cease to struggle and you cease to live</title>
  <meta name="author" content="JesseChiu">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Cease to struggle and you cease to live"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Cease to struggle and you cease to live" type="application/atom+xml">
  
  
    <link href="/favicon.ico" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/spacelab.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <!-- analytics -->
  



</head>


 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Cease to struggle and you cease to live</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="">
			  <i class="fa fa-rss"></i>Rss
			</a>
		  </li>
		  
		  <li>
			<a href="/sitemap.xml" title="">
			  <i class="fa fa-sitemap"></i>Sitemap
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">Cease to struggle and you cease to live</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      Keep on going never give up.
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-30 </div>
			<div class="article-title"><a href="/2018/07/30/2018-07-30-baidu-yun-pan-download-tools/" >百度网盘内容下载工具</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>360网盘关闭后，百度似乎要成为国内网盘的唯一选择，然而百度云下载速度太慢，显然是被限速了，吃相难看。下面有3个方法解决百度网盘限速的问题，演示的下载文件是大于1G的一个 <a href="https://www.runningcheese.com/go/?url=https://pan.baidu.com/s/1miMaRiw" target="_blank" rel="noopener">War3.zip</a> 单文件（用拖拽的方法打开，否则显示页面不存在），使用的宽带是电信20M，百度限速后的下载速度只有256KB/s，而理论上的下载速度是可以达到2M/s的。奶酪也将持续关注百度网盘限速的问题。  </p>
<h2 id="1-百度网盘下载助手脚本-—-2018-04-15更新【最长久】"><a href="#1-百度网盘下载助手脚本-—-2018-04-15更新【最长久】" class="headerlink" title="1. 百度网盘下载助手脚本 — 2018-04-15更新【最长久】"></a>1. 百度网盘下载助手脚本 — 2018-04-15更新【最长久】</h2><p>最早是网友“有一份田”制作的脚本百度下载助手，可以显示直链，绕过大文件云盘下载，还可以调用<a href="https://www.runningcheese.com/go/?url=http://dl.xunlei.com/" target="_blank" rel="noopener">迅雷</a>或者<a href="https://www.runningcheese.com/go/?url=http://www.zdfans.com/575.html" target="_blank" rel="noopener">IDM</a>加速下载。</p>
<p><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1fqei3eshpyj20k00ci3yq.jpg" alt=""><br><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1fqei3mv5tej20k00ad74e.jpg" alt=""></p>
<p><strong>使用方法：</strong><br>1、浏览器安装拓展 <a href="https://www.runningcheese.com/go/?url=https://violentmonkey.github.io/get-it/" target="_blank" rel="noopener">Violentmonkey</a> 或者 <a href="https://www.runningcheese.com/go/?url=http://tampermonkey.net/" target="_blank" rel="noopener">Tampermonkey</a><br>2、安装下载脚本：<a href="https://www.runningcheese.com/go/?url=https://greasyfork.org/zh-CN/scripts/39776" target="_blank" rel="noopener">https://greasyfork.org/zh-CN/scripts/39776</a><br>3、用迅雷或IDM下载时，点击“直接下载”，然后将链接复制到迅雷或IDM中去下载，支持在网盘管理页面和文件分享页面生效。</p>
<p><strong>注意：</strong><br>1、IDM绿色版需要点击运行文件 “!绿化卸载.bat” 才会自动关联下载。<br>2、如果你不太会怎么操作，你可以尝试一下已经集成好脚本的Firefox浏览器：<a href="https://www.runningcheese.com/v10" target="_blank" rel="noopener">https://www.runningcheese.com/v10</a><br>（下载后需要在右上角的那个“火箭”图标里选择“系统工具”，然后再选择“设置IDM”，这样就会自动调用IDM下载了。）<br>3、如果下载速度被限制在100KB左右，说明你的帐号被百度网盘拉黑了，需要退出登录才能恢复正常下载。<br>4、如果下载速度在200-700KB左右，可以在“设置–&gt;连接”中，将最达连接数设置为16或者32.<br>5、在文件分享页面，直接选择文件夹会无法下载，可以同时勾选下载任意一个文件，让文件夹与文件同时下载，这时即可下载。</p>
<p><strong>另附：</strong><br>迅雷极速版下载：<a href="https://www.runningcheese.com/go/?url=http://www.pc6.com/softview/softview_108931.html" target="_blank" rel="noopener">http://www.pc6.com/softview/softview_108931.html</a><br>IDM 绿色版下载：<a href="https://www.runningcheese.com/go/?url=https://pan.baidu.com/share/init?shareid=3457730696&uk=1767948507#3edk" target="_blank" rel="noopener">https://pan.baidu.com/share/init?shareid</a> 密码 3edk </p>
<h2 id="2-度盘下载器-—-2018-05-14更新-【速度最快】"><a href="#2-度盘下载器-—-2018-05-14更新-【速度最快】" class="headerlink" title="2. 度盘下载器 — 2018-05-14更新 【速度最快】"></a>2. 度盘下载器 — 2018-05-14更新 【速度最快】</h2><p>PanDownload二代，最新度盘不限速！！实测速度最高可达5MB/S，采用了Aria 2技术，下载自动切换线路，支持设置超高线程爆速下载。由原作者双霖等人开发，2.0版界面全新设计。</p>
<p><a href="https://ww3.sinaimg.cn/large/7a6a15d5gy1fjgvc3ziunj20nq08x41v.jpg" target="_blank" rel="noopener"><img src="https://ww3.sinaimg.cn/large/7a6a15d5gy1fjgvc3ziunj20nq08x41v.jpg" alt=""></a></p>
<p>下载地址： （v2.31最新）<br>链接: <a href="https://www.runningcheese.com/go/?url=https://pan.lanzou.com/i0irygf" target="_blank" rel="noopener">https://pan.lanzou.com/i0irygf</a>  </p>
<h2 id="3-速盘-—-2018-07-10更新-【功能最强大】"><a href="#3-速盘-—-2018-07-10更新-【功能最强大】" class="headerlink" title="3. 速盘 — 2018-07-10更新 【功能最强大】"></a>3. 速盘 — 2018-07-10更新 【功能最强大】</h2><p>由吾爱破解论坛会员“菩提叶”制作的度盘满速下载工具。这款百度网盘高速下载工具，免费小巧简单易用，采用了Aria2多线程下载，支持免登陆网盘账号解析分享链接下载，支持百度网盘网络资源搜索并下载，登陆我的网盘账户可以下载网盘文件，还能离线下载。下载地址： （v1.4.1最新）</p>
<p><a href="https://ws1.sinaimg.cn/large/7a6a15d5gy1fsfmoq7izgj20sg0icgmp.jpg" target="_blank" rel="noopener"><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1fsfmoq7izgj20sg0icgmp.jpg" alt=""></a></p>
<p>功能介绍：<br>1、百度网盘不限速下载 （正常情况下都可以满宽带）<br>2、分享链接下载 （不需要登录）<br>3、分享资源搜索并下载（不需要等录）<br>4、离线下载 （离线下载需要登录）<br>5、其它网盘常规操作，如创建文件夹，创建分享链接，删除等（访问自己的网盘需要登录） 6、登录时调用的是百度的登录页，只记录登录cookie，不会保存用户密码等信息。  </p>
<h2 id="4-PanDownload-—-2018-03-10更新-【最早】"><a href="#4-PanDownload-—-2018-03-10更新-【最早】" class="headerlink" title="4. PanDownload — 2018-03-10更新 【最早】"></a>4. PanDownload — 2018-03-10更新 【最早】</h2><p>52Pojie网友@<a href="https://www.runningcheese.com/go/?url=http://www.52pojie.cn/thread-579335-1-1.html" target="_blank" rel="noopener">Kiryuu</a> 制作作的一个C#语言下载工具，工作原理和方法5类似，可满速下载。登陆自己的账号选择文件下载即可，这对于不会使用脚本的人来说非常的方便，作者提供了一个检查更新的通道，可供持续检查更新，这样就不怕软件失效了。</p>
<p>下载地址：（ v1.5.4最新）<br><a href="https://www.runningcheese.com/go/?url=https://pan.lanzou.com/b1733233/" target="_blank" rel="noopener">https://pan.lanzou.com/b173323/</a><br>备用下载：<a href="https://www.runningcheese.com/baiduyun" target="_blank" rel="noopener"></a></p>
<p><a href="https://ww3.sinaimg.cn/large/7a6a15d5gy1fdal9isi9mj20cm0e6q2z.jpg" target="_blank" rel="noopener"><img src="https://ww3.sinaimg.cn/large/7a6a15d5gy1fdal9isi9mj20cm0e6q2z.jpg" alt=""></a>  </p>
<h2 id="5-Proxyee-down-—-2018-07-20更新-【支持MAC】"><a href="#5-Proxyee-down-—-2018-07-20更新-【支持MAC】" class="headerlink" title="5. Proxyee down — 2018-07-20更新 【支持MAC】"></a>5. Proxyee down — 2018-07-20更新 【支持MAC】</h2><p><a href="https://www.runningcheese.com/go/?url=https://github.com/proxyee-down-org/proxyee-down" target="_blank" rel="noopener">Proxyee down</a> 使用本地http代理服务器方式嗅探下载请求，支持所有操作系统和大部分主流浏览器,支持分段下载和断点下载。</p>
<p><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1ftl7pzoy21j20l206j0sy.jpg" alt=""></p>
<p>下载地址：（ v2.5.4最新）<br><a href="https://www.runningcheese.com/go/?url=https://github.com/proxyee-down-org/proxyee-down/releases" target="_blank" rel="noopener">https://github.com/proxyee-down-org/proxyee-down/releases</a></p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>1，下载链接如若失效，或者高速下载上述软件，<a href="https://ws1.sinaimg.cn/large/7a6a15d5gy1fr3v1xxt8ej205k05kt8p.jpg" target="_blank" rel="noopener">公众号</a>（ID: runningcheese01）回复关键字“百度云”即可获取。  </p>
<p>2，最后，利用这些方法可以在百度网盘离线下载一些冷门的磁力资源并获得最高的下载速度，方法我想应该不用我说了吧？</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.runningcheese.com/baiduyun" target="_blank" rel="noopener">原文</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-23 </div>
			<div class="article-title"><a href="/2018/07/23/2018-07-23-rxjava-map/" >RxJava Map</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="一、变换"><a href="#一、变换" class="headerlink" title="一、变换"></a>一、变换</h2><h3 id="1-Map"><a href="#1-Map" class="headerlink" title="1. Map"></a>1. Map</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">String[] str1 = &#123;<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Observable.fromArray(str1)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// 这里用了 Function 包装接口，返回一个新的值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        .map(<span class="keyword">new</span> Function&lt;String, String&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">return</span> <span class="string">"apply: "</span> + s;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        &#125;)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">                System.out.println(<span class="string">"s = ["</span> + s + <span class="string">"]"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">        &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行结果</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行结果</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">s = [apply <span class="number">1</span>]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">s = [apply <span class="number">2</span>]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">s = [apply <span class="number">3</span>]</span></pre></td></tr></table></figure>

<h3 id="2-FlatMap"><a href="#2-FlatMap" class="headerlink" title="2. FlatMap"></a>2. FlatMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 学生类</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> String name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> String [] course;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, String[] course)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>.name = name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>.course = course;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> String[] getCourse() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> course;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">String[] course1 = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">String[] course2 = &#123;<span class="string">"d"</span>,<span class="string">"e"</span>,<span class="string">"f"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">Student[] students = &#123;<span class="keyword">new</span> Student(<span class="string">"kuku"</span>,course1),<span class="keyword">new</span> Student(<span class="string">"lili"</span>,course2)&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里通过 flatMap 获取每个学生的课程</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">Observable.fromArray(students)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        .flatMap(<span class="keyword">new</span> Function&lt;Student, ObservableSource&lt;String&gt;&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">            <span class="comment">// 多了一层 Observable 来处理</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> ObservableSource&lt;String&gt; <span class="title">apply</span><span class="params">(Student student)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">return</span> Observable.fromArray(student.getCourse());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">        &#125;)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">                System.out.println(<span class="string">"s = ["</span> + s + <span class="string">"]"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">        &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行结果</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">s = [a]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">s = [b]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">s = [c]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">s = [d]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">s = [e]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">s = [f]</span></pre></td></tr></table></figure>


<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-23 </div>
			<div class="article-title"><a href="/2018/07/23/2018-07-23-rxjava-encapsulation-fun/" >RxJava 函数封装</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="一、封装同步函数"><a href="#一、封装同步函数" class="headerlink" title="一、封装同步函数"></a>一、封装同步函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable <span class="title">wrappedMethod</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> Observable.defer(() -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> Observable.just(library.synchronousMethod());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>
<p>如果你的库拥有可用的同步方法，那么将其用 RxJava 封装起来的最好的方式是使用 <code>Observable.defer()</code>这会简单地延迟这个调用直到 observable 被订阅，然后在 subscription 的分配线程中执行</p>
<h2 id="二、封装抛出异常的同步方法"><a href="#二、封装抛出异常的同步方法" class="headerlink" title="二、封装抛出异常的同步方法"></a>二、封装抛出异常的同步方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable <span class="title">queryInventory</span><span class="params">(<span class="keyword">final</span> List skus)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">return</span> Observable.defer(() -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> Observable.just(helper.queryInventory(skus));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">catch</span> (IabException e) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> Observable.error(e);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">  &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>将同步调用的代码用 try-catch 包起来，并根据结果返回 <code>Observable.just()</code> 或是 <code>Observable.error()</code>,这里不能直接使用 <code>Observable.just()</code> 方法，因为它抛出的 <code>IabException</code> 并不是 <code>RuntimeException</code> 的子类，因此必须被捕获。</p>
<h2 id="三、封装带有监听器的方法"><a href="#三、封装带有监听器的方法" class="headerlink" title="三、封装带有监听器的方法"></a>三、封装带有监听器的方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable <span class="title">setup</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">return</span> Observable.create( emitter -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (!helper.setupSuccessful()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      helper.startSetup(result -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> ( emitter.isUnsubscribed()) <span class="keyword">return</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (result.isSuccess()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">           emitter.onNext(<span class="keyword">null</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">           emitter.onCompleted();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">           emitter.onError(<span class="keyword">new</span> IabException(result.getMessage()));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">      &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">       emitter.onNext(<span class="keyword">null</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">       emitter.onComplete();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">  &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>封装那些使用了监听器的方法时，<code>Observable.just()</code> 并不管用，因为它一般没有返回值。我们必须使用 <code>Observable.create()</code>,这样我们就可以将监听器的结果回调给  emitter</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0413/4141.html" target="_blank" rel="noopener">使用 RxJava 封装现有的库</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-02 </div>
			<div class="article-title"><a href="/2018/07/02/2018-07-02-android-log/" >Android 日志分类</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="Android-日志分类"><a href="#Android-日志分类" class="headerlink" title="Android 日志分类"></a>Android 日志分类</h2><h3 id="1-ANR-Application-Not-Responding"><a href="#1-ANR-Application-Not-Responding" class="headerlink" title="1. ANR(Application Not Responding)"></a>1. ANR(Application Not Responding)</h3><p>主要是说应用程序出现无响应的情况。在这个情况出现的时候同时在手机界面会弹出响应的对话框，提示应用程序无响应　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　 </p>
<h4 id="1-1-ANR-的几种类型"><a href="#1-1-ANR-的几种类型" class="headerlink" title="1.1 ANR 的几种类型:"></a>1.1 ANR 的几种类型:</h4><p>当运行指定的APP，如果 Android 系统检测到符合下边的几种条件那就会弹出应用程序无响应的界面。　　　</p>
<ul>
<li>按键超时　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<br>Android 默认的响应时间是 <strong>5s</strong>，如果一个触屏事件超过 <strong>5s</strong>，那么就会发生此现象。　　　　　　　                 </li>
<li>广播超时<br>广播的默认响应时间是 <strong>10s</strong>，如果一个广播在 <strong>10s</strong> 之内还没有执行完，那么就会出现此现象。                          </li>
<li>服务超时<br>服务的默认响应事件是 <strong>20s</strong>,如果请求的服务在 <strong>20s</strong> 内失败，那么就会发生此现象。</li>
</ul>
<h3 id="1-2-ANR-事件与异常的区别"><a href="#1-2-ANR-事件与异常的区别" class="headerlink" title="1.2 ANR 事件与异常的区别"></a>1.2 ANR 事件与异常的区别</h3><p>ANR 事件是由于一些操作的原因或者是反应事件较慢会出现程序无响应的情况，而异常是程序由于代码或者是一些其他的原因出现程序停止运行的情况，这两种情况的性质是完全不一样的。　　　　　　　   </p>
<h3 id="1-3-与-ANR-相关的一些东西"><a href="#1-3-与-ANR-相关的一些东西" class="headerlink" title="1.3 与 ANR 相关的一些东西"></a>1.3 与 ANR 相关的一些东西</h3><ul>
<li>Java 进程分为主线程和主消息队列</li>
<li>主线程主要是用来处理一些有关 UI 事件，比如画图，监听或是接受 UI 事件。　　　　　　　　　　　　   </li>
<li>主线程还要从主消息队列取出一些消息并且能够尽可能快的处理这些消息</li>
<li>在主线程还没有处理完当前的消息的时候，他是不能再去取下一条消息的</li>
<li>如果主线程没有及时处理掉这个消息，那么 ANR 事件就会发生。　　　　　　　　　　　　　　　　　  </li>
</ul>
<h3 id="1-4-如何分析-ANR"><a href="#1-4-如何分析-ANR" class="headerlink" title="1.4 如何分析 ANR"></a>1.4 如何分析 ANR</h3><ul>
<li>首先需要找出 ANR 发生的事件，进程号，还有 ANR 的类型。　　　　　　　　　　　　　　　　　　　　</li>
<li>检查 CPU 的内存使用情况。　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　</li>
<li>需要检查文件 trace.txt，还有映射进程，时间戳等信息。　　　　　　　　　　　　　　　　　　　　　　</li>
<li>通过 main log 和 event log 寻找更多的有用信息，用来分析问题　　　　　　　　　　　　　　　　   </li>
</ul>
<h3 id="1-5-分析-ANR-需要注意的地方："><a href="#1-5-分析-ANR-需要注意的地方：" class="headerlink" title="1.5 分析 ANR 需要注意的地方："></a>1.5 分析 ANR 需要注意的地方：</h3><ul>
<li>尽可能使用 eng 版本去抓取 log，因为 eng 版本抓取的 log 是最全面的，有些 log 在 eng 版本下才会打开　</li>
<li>我们还需要抓取一些很重要的 log 文件，提供给 MTK 分析使用，让他们帮着一起分析问题所在</li>
</ul>
<h3 id="1-6-导出日子方法："><a href="#1-6-导出日子方法：" class="headerlink" title="1.6 导出日子方法："></a>1.6 导出日子方法：</h3><p>anr 问题的 log 一般都在 <code>/data/anr/</code> 目录下，使用如下命令即可导出 log</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">adb pull /data/anr/traces.txt   d:/ </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">// 将手机上的 traces.txt 导出到电脑的 d 目录下</span></pre></td></tr></table></figure>

<p>但是也会有该命令失效的时候。你能 adb shell ls /data/anr/  看到该文件，但是导出时会提示该文件不存在，原因没有去跟，但是导出的方式可以如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">adb shell </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">cat  /data/anr/xxx   &gt;/mnt/sdcard/yy/zz.txt   </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">adb pull /mnt/sdcard/yy/zz.txt  d: // 即可将文件导出到了d盘。</span></pre></td></tr></table></figure>

<h3 id="2-FC-Force-Close"><a href="#2-FC-Force-Close" class="headerlink" title="2. FC(Force Close)"></a>2. FC(Force Close)</h3><p>Force Close,意为强行关闭，当前应用程序发生了冲突，例如:</p>
<ul>
<li>NullPointExection（空指针）</li>
<li>IndexOutOfBoundsException（下标越界），</li>
<li>Android API 使用的顺序错误也可能导致（比如 setContentView() 之前进行了 findViewById()操作）等等一系列未捕获异常</li>
</ul>
<p>解决办法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">extends</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Thread</span>.<span class="title">UncaughtExceptionHandler</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">int</span> a[];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">      <span class="comment">// TODO Auto-generated method stub</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">      Thread.setDefaultUncaughtExceptionHandler(<span class="keyword">this</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">int</span> i = a[<span class="number">0</span>];<span class="comment">//异常</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">  <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread arg0, Throwable arg1)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">      <span class="comment">// TODO Auto-generated method stub</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">      Log.i(<span class="string">"tag"</span>, <span class="string">"childThread:截获到forceclose，异常原因为："</span> + <span class="string">"\n"</span> +</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">              arg1.toString()+<span class="string">"  Thread-&gt;"</span>+arg0.getId()+<span class="string">" 本线程id-&gt;"</span>+Thread.currentThread().getId()+<span class="string">" "</span>+</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">              Thread.currentThread().getName());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">      android.os.Process.killProcess(android.os.Process.myPid());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>


<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://blog.csdn.net/u010586698/article/details/51213092" target="_blank" rel="noopener">Application Not Responding(ANR)的事件分析</a></li>
<li><a href="https://blog.csdn.net/weixin_37730482/article/details/70830844" target="_blank" rel="noopener">关于Android Force Close 出现的原因 以及解决方法</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-06-26 </div>
			<div class="article-title"><a href="/2018/06/26/2018-06-26-android-recyclerview-divider/" >RecyclerView 设置分割线方法</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="一、最简单的方法（布局划线）"><a href="#一、最简单的方法（布局划线）" class="headerlink" title="一、最简单的方法（布局划线）"></a>一、最简单的方法（布局划线）</h2><p>在 item.xml 文件中在最下方指定一条分割线</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span> <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/image_view"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">TextView</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/text_view"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"left"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"10dp"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">View</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"1dp"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>/&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span></pre></td></tr></table></figure>

<h2 id="二、重载-DividerItemDecoration-类"><a href="#二、重载-DividerItemDecoration-类" class="headerlink" title="二、重载 DividerItemDecoration 类"></a>二、重载 DividerItemDecoration 类</h2><p>使用方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 添加默认分割线：高度为<span class="number">2</span>px，颜色为灰色</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(mContext, LinearLayoutManager.VERTICAL));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> 添加自定义分割线：可自定义分割线drawable</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    mContext, LinearLayoutManager.VERTICAL, R.drawable.divider_mileage));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>. 添加自定义分割线：可自定义分割线高度和颜色</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    mContext, LinearLayoutManager.VERTICAL, <span class="number">10</span>, getResources().getColor(R.color.divide_gray_color)));</span></pre></td></tr></table></figure>
<p>类实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.neso.settings;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v4.content.ContextCompat;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v7.widget.LinearLayoutManager;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.view.View;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecycleViewDivider</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ItemDecoration</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> Paint mPaint;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> Drawable mDivider;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// dividing line height,default 1px</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 分割线高度，默认为 1px</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mDividerHeight = <span class="number">2</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// list orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 列表的方向：LinearLayoutManager.VERTICAL 或 LinearLayoutManager.HORIZONTAL</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mOrientation;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] ATTRS = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;android.R.attr.listDivider&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * default dividing line,height 2px,color is gray</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * 默认分割线：高度为 2px，颜色为灰色</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     *</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecycleViewDivider</span><span class="params">(Context context, <span class="keyword">int</span> orientation)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (orientation != LinearLayoutManager.VERTICAL &amp;&amp; orientation != LinearLayoutManager.HORIZONTAL) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid orientation. It should be either HORIZONTAL or VERTICAL"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">        mOrientation = orientation;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> TypedArray a = context.obtainStyledAttributes(ATTRS);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">        mDivider = a.getDrawable(<span class="number">0</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">        a.recycle();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * custom dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * 自定义分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     *</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> drawableId</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecycleViewDivider</span><span class="params">(Context context, <span class="keyword">int</span> orientation, <span class="keyword">int</span> drawableId)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>(context, orientation);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line">        mDivider = ContextCompat.getDrawable(context, drawableId);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//        mDividerHeight = mDivider.getIntrinsicHeight();</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">56</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">57</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">58</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">59</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * custom dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">60</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * 自定义分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">61</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     *</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">62</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">63</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">64</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> dividerHeight</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">65</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> dividerColor</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">66</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">67</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecycleViewDivider</span><span class="params">(Context context, <span class="keyword">int</span> orientation, <span class="keyword">int</span> dividerHeight, <span class="keyword">int</span> dividerColor)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">68</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>(context, orientation);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">69</span></pre></td><td class="code"><pre><span class="line">        mDividerHeight = dividerHeight;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">70</span></pre></td><td class="code"><pre><span class="line">        mPaint = <span class="keyword">new</span> Paint(Paint.ANTI_ALIAS_FLAG);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">71</span></pre></td><td class="code"><pre><span class="line">        mPaint.setColor(dividerColor);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">72</span></pre></td><td class="code"><pre><span class="line">        mPaint.setStyle(Paint.Style.FILL);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">73</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">74</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">75</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">76</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// get item offset</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">77</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 获取 item 偏移量</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">78</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">79</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getItemOffsets</span><span class="params">(Rect outRect, View view, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">80</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">super</span>.getItemOffsets(outRect, view, parent, state);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">81</span></pre></td><td class="code"><pre><span class="line">        outRect.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, mDividerHeight);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">82</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">83</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">84</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// draw dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">85</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 绘制分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">86</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">87</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas c, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">88</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">super</span>.onDraw(c, parent, state);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">89</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (mOrientation == LinearLayoutManager.VERTICAL) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">90</span></pre></td><td class="code"><pre><span class="line">            drawVertical(c, parent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">91</span></pre></td><td class="code"><pre><span class="line">        &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">92</span></pre></td><td class="code"><pre><span class="line">            drawHorizontal(c, parent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">93</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">94</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">95</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">96</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// draw horizontal dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">97</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 绘制横向 item 分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">98</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawHorizontal</span><span class="params">(Canvas canvas, RecyclerView parent)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">99</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> left = parent.getPaddingLeft();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">100</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> right = parent.getMeasuredWidth() - parent.getPaddingRight();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">101</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childSize = parent.getChildCount();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">102</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childSize; i++) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">103</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> View child = parent.getChildAt(i);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">104</span></pre></td><td class="code"><pre><span class="line">            RecyclerView.LayoutParams layoutParams = (RecyclerView.LayoutParams) child.getLayoutParams();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">105</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> top = child.getBottom() + layoutParams.bottomMargin;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">106</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> bottom = top + mDividerHeight;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">107</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mDivider != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">108</span></pre></td><td class="code"><pre><span class="line">                mDivider.setBounds(left, top, right, bottom);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">109</span></pre></td><td class="code"><pre><span class="line">                mDivider.draw(canvas);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">110</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">111</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mPaint != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">112</span></pre></td><td class="code"><pre><span class="line">                canvas.drawRect(left, top, right, bottom, mPaint);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">113</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">114</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">115</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">116</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">117</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// draw vertical dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">118</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 绘制纵向 item 分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">119</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawVertical</span><span class="params">(Canvas canvas, RecyclerView parent)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">120</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> top = parent.getPaddingTop();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">121</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> bottom = parent.getMeasuredHeight() - parent.getPaddingBottom();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">122</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childSize = parent.getChildCount();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">123</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childSize; i++) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">124</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> View child = parent.getChildAt(i);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">125</span></pre></td><td class="code"><pre><span class="line">            RecyclerView.LayoutParams layoutParams = (RecyclerView.LayoutParams) child.getLayoutParams();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">126</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> left = child.getRight() + layoutParams.rightMargin;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">127</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> right = left + mDividerHeight;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">128</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mDivider != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">129</span></pre></td><td class="code"><pre><span class="line">                mDivider.setBounds(left, top, right, bottom);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">130</span></pre></td><td class="code"><pre><span class="line">                mDivider.draw(canvas);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">131</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">132</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mPaint != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">133</span></pre></td><td class="code"><pre><span class="line">                canvas.drawRect(left, top, right, bottom, mPaint);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">134</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">135</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">136</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">137</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>自定义的 drawable 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">size</span> <span class="attr">android:height</span>=<span class="string">"20dp"</span> /&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#ff992900"</span> /&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://blog.csdn.net/yancychas/article/details/77484659" target="_blank" rel="noopener">RecyclerView 设置分隔线的三种方法</a></li>
<li><a href="https://blog.csdn.net/lmj623565791/article/details/45059587" target="_blank" rel="noopener">Android RecyclerView 使用完全解析 体验艺术般的控件</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-06-21 </div>
			<div class="article-title"><a href="/2018/06/21/2018-06-21-android-skill-code/" >Android 代码实例</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="显示弹框"><a href="#显示弹框" class="headerlink" title="显示弹框"></a>显示弹框</h2><h3 id="1-普通弹框"><a href="#1-普通弹框" class="headerlink" title="1. 普通弹框"></a>1. 普通弹框</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showInputTimeDialog</span><span class="params">()</span></span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    AlertDialog.Builder builder = <span class="keyword">new</span> AlertDialog.Builder(MainActivity.<span class="keyword">this</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    builder.setIcon(R.mipmap.ic_launcher);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    builder.setTitle(<span class="string">"请输入采集日志持续时间"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">//  通过 LayoutInflater 来加载一个 xml 的布局文件作为一个 View 对象</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    View view = LayoutInflater.from(MainActivity.<span class="keyword">this</span>).inflate(R.layout.dialog_time_value, <span class="keyword">null</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 设置我们自己定义的布局文件作为弹出框的 Content</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    builder.setView(view);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">final</span> EditText durationTime = (EditText)view.findViewById(R.id.duriationTime);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    builder.setPositiveButton(<span class="string">"确定"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">        <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">            String time = durationTime.getText().toString().trim();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span>(time.equals(<span class="string">""</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"Please enter the value"</span>,Toast.LENGTH_SHORT).show();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">return</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">            initAcquisitionLog(Integer.parseInt(time));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    builder.setNegativeButton(<span class="string">"取消"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">        <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    builder.show();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<h3 id="2-设置系统级别弹框"><a href="#2-设置系统级别弹框" class="headerlink" title="2. 设置系统级别弹框"></a>2. 设置系统级别弹框</h3><p>有的时候我们需要非 Activity 的类下面弹框，例如在广播接收器(receiver)中弹框，这时只能是系统级别的弹框才行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showInputTimeDialog</span><span class="params">(<span class="keyword">final</span> Context context,<span class="keyword">final</span> String filePath)</span></span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    AlertDialog.Builder builder = <span class="keyword">new</span> AlertDialog.Builder(context);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    builder.setIcon(R.mipmap.ic_launcher);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    builder.setTitle(<span class="string">"请输入发送的邮箱地址"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">//  通过 LayoutInflater 来加载一个 xml 的布局文件作为一个 View 对象</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    View view = LayoutInflater.from(context).inflate(R.layout.dialog_send,<span class="keyword">null</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 设置我们自己定义的布局文件作为弹出框的 Content</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    builder.setView(view);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">final</span> EditText emailText = (EditText)view.findViewById(R.id.email);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    builder.setPositiveButton(<span class="string">"确定"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">            String emailAddress = emailText.getText().toString().trim();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (!MailHelper.verifyEmailAddress(emailAddress)) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">                Toast.makeText(context, <span class="string">"请输入正确的邮箱地址"</span>, Toast.LENGTH_SHORT).show();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">return</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">            sendLogEmail(filePath, emailAddress);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    AlertDialog alertDialog = builder.create();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 需要设置为系统基本弹框</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    alertDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    alertDialog.show();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>在 <code>AndroidManifest.xml</code> 文件中添加 <code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;</code></p>
<h2 id="权限检查三种方法"><a href="#权限检查三种方法" class="headerlink" title="权限检查三种方法"></a>权限检查三种方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkPermission1</span><span class="params">(Context context, String[] permissions)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    PackageManager packageManager = context.getPackageManager();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    String packageName = context.getPackageName();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> (String permission : permissions) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">int</span> per = packageManager.checkPermission(permission, packageName);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (PackageManager.PERMISSION_DENIED == per) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">            Log.w(TAG, <span class="string">"required permission not granted . permission = "</span> + permission);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkPermission2</span><span class="params">(Context context, String[] permissions)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> (String permission : permissions) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">int</span> per =context.checkPermission(permission, Process.myPid(),Process.myUid());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (PackageManager.PERMISSION_GRANTED != per) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">            Log.w(TAG, <span class="string">"required permission not granted . permission = "</span> + permission);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkPermission3</span><span class="params">(Context context, String[] permissions)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span> (String permission : permissions) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">int</span> per = ContextCompat.checkSelfPermission(context, Manifest.permission.CAMERA);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (PackageManager.PERMISSION_GRANTED != per) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">            Log.w(TAG, <span class="string">"required permission not granted . permission = "</span> + permission);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<ul>
<li>[Android 检测权限的三种写法]<a href="https://www.jianshu.com/p/11d99a9be7d9" target="_blank" rel="noopener">https://www.jianshu.com/p/11d99a9be7d9</a>)</li>
</ul>
<h2 id="显示内存"><a href="#显示内存" class="headerlink" title="显示内存"></a>显示内存</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">ActivityManager activityManager = (ActivityManager)ArkeApplication.getContext().getSystemService(Context.ACTIVITY_SERVICE);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 系统分配一个应用的内存大小(M)</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> memClass = activityManager.getMemoryClass();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 系统分配一个应用最大内存大小(M),可以通过 </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// AndroidManifest.xml -&gt; application -&gt; android:largeHeap="true" 开启</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> largememClass = activityManager.getLargeMemoryClass();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">Timber.d(<span class="string">"memClass:%d largememClass:%d"</span>,memClass,largememClass);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态获取显示运行时内存</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">Float totalMemory = Runtime.getRuntime().totalMemory() * <span class="number">1.0f</span>/(<span class="number">1024</span>*<span class="number">1024</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">Float freeMemory = Runtime.getRuntime().freeMemory() * <span class="number">1.0f</span>/(<span class="number">1024</span>*<span class="number">1024</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">Float maxMemory = Runtime.getRuntime().maxMemory() * <span class="number">1.0f</span>/(<span class="number">1024</span>*<span class="number">1024</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">Timber.d(<span class="string">"totalMemory:%f freeMemory:%f maxMemory:%f"</span>,totalMemory,freeMemory,maxMemory);</span></pre></td></tr></table></figure>


<h2 id="主线程和子线程之间传递消息"><a href="#主线程和子线程之间传递消息" class="headerlink" title="主线程和子线程之间传递消息"></a>主线程和子线程之间传递消息</h2><ul>
<li><a href="https://www.cnblogs.com/laughingQing/p/5436998.html" target="_blank" rel="noopener">android 主线程和子线程之间的消息传递</a></li>
</ul>
<h2 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h2><h3 id="Activity-之间传值"><a href="#Activity-之间传值" class="headerlink" title="Activity 之间传值"></a>Activity 之间传值</h3><ul>
<li><a href="https://blog.csdn.net/qq_37169103/article/details/80406441" target="_blank" rel="noopener">android 之Activity的五种传值方式</a></li>
</ul>
<h3 id="Activity-四种启动模式"><a href="#Activity-四种启动模式" class="headerlink" title="Activity 四种启动模式"></a>Activity 四种启动模式</h3><ul>
<li><a href="https://blog.csdn.net/zy_jibai/article/details/80587083" target="_blank" rel="noopener">细谈 Activity 四种启动模式</a></li>
<li><a href="https://www.jianshu.com/p/50264d6cccb3?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation" target="_blank" rel="noopener">终于懂了之 Activity 的四种启动模式</a></li>
</ul>
<h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><p>服务和广播都是运行在 UI 线程中，如果需要操作耗时操作，需要在里面创建一个新的线程来运行</p>
<h3 id="服务类型"><a href="#服务类型" class="headerlink" title="服务类型"></a>服务类型</h3><ol>
<li>不可交互的后台服务：onCreate() -&gt; onStartCommand() -&gt; onDestroy()</li>
<li>可交互的后台服务： onCreate() -&gt; onBind() -&gt; onUnbind() -&gt; onDestory()</li>
<li>前台服务</li>
<li>IntentService</li>
</ol>
<h3 id="跨应用-Service-通讯"><a href="#跨应用-Service-通讯" class="headerlink" title="跨应用 Service 通讯"></a>跨应用 Service 通讯</h3><h4 id="通过-Intent"><a href="#通过-Intent" class="headerlink" title="通过 Intent"></a>通过 Intent</h4><p>通过 Action 的隐式 Intent 启动 Service 在安卓 5.0 以前的版本是可以实现跨应用启动 Service 的，安卓 5.0 以后的版本若想实现跨应用启动 Service 的功能必须使用显示 Intent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">serviceIntent = <span class="keyword">new</span> Intent();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">serviceIntent.setComponent(<span class="keyword">new</span> ComponentName(<span class="string">"com.example.service1"</span>, <span class="string">"com.example.service1.MyService"</span>));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">startService(serviceIntent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">stopService(serviceIntent);</span></pre></td></tr></table></figure>
<ul>
<li><a href="https://blog.csdn.net/gaopeng0071/article/details/46048159" target="_blank" rel="noopener">Android – 跨应用启动Service</a></li>
</ul>
<h4 id="AIDL"><a href="#AIDL" class="headerlink" title="AIDL"></a>AIDL</h4><ul>
<li>[Android 通过 AIDL 在两个 APP之 间 Service 通信]方式(<a href="https://www.cnblogs.com/xqz0618/p/aidl_service.html" target="_blank" rel="noopener">https://www.cnblogs.com/xqz0618/p/aidl_service.html</a>)</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://blog.csdn.net/weixin_41101173/article/details/79684183" target="_blank" rel="noopener">Service 精炼详解</a></li>
<li><a href="https://www.jianshu.com/p/8c4181049564" target="_blank" rel="noopener">Android IntentService 使用介绍以及原理分析</a></li>
<li><a href="https://blog.csdn.net/xiaanming/article/details/9750689" target="_blank" rel="noopener">Android Service 与 Activity 之间通信的几种方式</a></li>
</ul>
<h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><ul>
<li><a href="https://www.jianshu.com/p/11c8ced79193" target="_blank" rel="noopener">《Android Fragment 非常详细的一篇》</a></li>
</ul>
<h2 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a>RecyclerView</h2><ul>
<li><a href="https://www.jianshu.com/p/b4bb52cdbeb7" target="_blank" rel="noopener">RecyclerView</a></li>
</ul>
<h2 id="FrameLayout"><a href="#FrameLayout" class="headerlink" title="FrameLayout"></a>FrameLayout</h2><ul>
<li><a href="https://www.runoob.com/w3cnote/android-tutorial-framelayout.html" target="_blank" rel="noopener">FrameLayout</a></li>
</ul>
<h2 id="Activity-界面自动弹出软键盘"><a href="#Activity-界面自动弹出软键盘" class="headerlink" title="Activity 界面自动弹出软键盘"></a>Activity 界面自动弹出软键盘</h2><h3 id="1-zai-AndroidManifest-xml"><a href="#1-zai-AndroidManifest-xml" class="headerlink" title="1. zai AndroidManifest.xml"></a>1. zai AndroidManifest.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".setting.xxx.xxxActivity"</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">"stateVisible"</span> /&gt;</span></span></pre></td></tr></table></figure>
	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-06-21 </div>
			<div class="article-title"><a href="/2018/06/21/2018-06-21-android-databind/" >Android DataBinding</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="Data-Binding"><a href="#Data-Binding" class="headerlink" title="Data Binding"></a>Data Binding</h2><h3 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h3><ul>
<li>Activity,Fragment,Android UI</li>
<li>RecyclerView</li>
</ul>
<h3 id="基本用途"><a href="#基本用途" class="headerlink" title="基本用途"></a>基本用途</h3><ul>
<li>去掉 Activeitys &amp; Fragments 内的 UI 代码</li>
<li>XML 变成 UI 的唯一真实来源</li>
<li>减少定义 view id 的主要用途 – 不再需要 findViewById(xxx)</li>
</ul>
<ul>
<li><p>方法绑定</p>
<ul>
<li>固定格式值</li>
</ul>
</li>
<li><p>监听器绑定</p>
<ul>
<li>任意定义值</li>
<li>lamda 表达式</li>
</ul>
</li>
</ul>
<h2 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h2><ul>
<li><p><a href="https://www.imooc.com/learn/719" target="_blank" rel="noopener">Android Data Binding实战-入门篇</a></p>
</li>
<li><p><a href="https://www.imooc.com/learn/720" target="_blank" rel="noopener">Android Data Binding实战-高级篇</a></p>
</li>
<li><p><a href="https://github.com/markzhai/DataBindingSample" target="_blank" rel="noopener">慕课网视频教程代码</a></p>
</li>
<li><p><a href="http://blog.zhaiyifan.cn/2016/06/16/android-new-project-from-0-p7/" target="_blank" rel="noopener">从零开始的Android新项目7 - Data Binding入门篇</a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/ba4982be30f8" target="_blank" rel="noopener">DataBinding 使用全面详解</a></p>
</li>
<li><p><a href="https://blog.csdn.net/u012124438/article/details/53495951" target="_blank" rel="noopener">一篇博客理解 Recyclerview 的使用</a></p>
</li>
<li><p><a href="http://www.imooc.com/learn/424" target="_blank" rel="noopener">RecyclerView-明日之星</a></p>
</li>
<li><p><a href="http://www.imooc.com/learn/731" target="_blank" rel="noopener">不一样的RecyclerView优雅实现复杂列表布局</a></p>
</li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-06-14 </div>
			<div class="article-title"><a href="/2018/06/14/2018-06-14-px-pt-ppi-dpi-dp-sp/" >px、pt、ppi、dpi、dp、sp 之间的关系</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><img src="http://image.woshipm.com/wp-files/2015/07/QQ20150717160352.png" alt="QQ20150717160352"></p>
<p>做了几个移动端的项目之后，深感移动端尺寸换算的必要性，在此做个总结。</p>
<p>先介绍下各自的定义：</p>
<ul>
<li><strong>px：</strong>pixel，像素，电子屏幕上组成一幅图画或照片的最基本单元</li>
<li><strong>pt:</strong> point，点，印刷行业常用单位，等于1/72英寸</li>
<li><strong>ppi:</strong> pixel per inch，每英寸像素数，该值越高，则屏幕越细腻</li>
<li><strong>dpi:</strong> dot per inch，每英寸多少点，该值越高，则图片越细腻</li>
<li><strong>dp:</strong> dip，Density-independent pixel, 是安卓开发用的长度单位，1dp表示在屏幕像素点密度为160ppi时1px长度</li>
<li><strong>sp:</strong> scale-independent pixel，安卓开发用的字体大小单位。</li>
</ul>
<p>以下是换算关系：</p>
<h3 id="一、pt和px"><a href="#一、pt和px" class="headerlink" title="一、pt和px"></a>一、pt和px</h3><p><strong>公式一： 1pt= (DPI / 72) px</strong></p>
<p>当photoshop中新建画布的分辨率为72ppi( 即 72dpi时 )， 1pt=1px； 当新建画布分辨率为72*2=144ppi时，1pt=2px</p>
<h3 id="二、ppi和dpi"><a href="#二、ppi和dpi" class="headerlink" title="二、ppi和dpi"></a>二、ppi和dpi</h3><p>dpi最初用于衡量打印物上每英寸的点数密度。DPI值越小图片越不精细。当DPI的概念用在计算机屏幕上时，就应称之为ppi。同理： PPI就是计算机屏幕上每英寸可以显示的像素点的数量。因此，在电子屏幕显示中提到的ppi和dpi是一样的，可认为</p>
<p><strong>公式二：dpi=ppi</strong></p>
<h3 id="三、ppi计算方法"><a href="#三、ppi计算方法" class="headerlink" title="三、ppi计算方法"></a>三、ppi计算方法</h3><p>ppi是指屏幕上的像素密度，其计算方法为：</p>
<p><strong>公式三： ppi= 屏幕对角线上的像素点数/对角线长度 = √ （屏幕横向像素点^2 + 屏幕纵向像素点^2）/对角线长度</strong></p>
<p>以小米2s为例，该屏幕分辨率为720px*1280px，4.3英寸。则点密度为 √ (720^2 +1280^2) /4.3 = 342ppi。</p>
<h3 id="四、px-和-dp"><a href="#四、px-和-dp" class="headerlink" title="四、px 和 dp"></a>四、px 和 dp</h3><p>dp为安卓开发时的长度单位，根据不同的屏幕分辨率，与px有不同的对应关系。</p>
<p>安卓端屏幕大小各不相同，根据其像素密度，分为以下几种规格：</p>
<p><img src="http://image.woshipm.com/wp-files/2015/07/QQ20150717160404.png" alt="QQ20150717160404"></p>
<p>1dp定义为屏幕密度值为160ppi时的1px，即，在mdpi时，1dp = 1px。 以mdpi为标准，这些屏幕的密度值比为：ldpi : mdpi : hdpi : xhdpi : xxhdpi = 0.75 : 1 : 1.5 : 2 : 3；即，在xhdpi的密度下，1dp=2px；在hdpi情况下，1dp=1.5px。其他类推。</p>
<p><strong>公式四： 1dp=（屏幕ppi/ 160）px</strong></p>
<p>以WVGA屏为例，该屏幕为480px*800px，按3.8寸屏算，点密度 √ (480^2 + 800^2) / 3.8 = 245，约等于240，对应于hdpi屏幕，所以该屏幕1dp=1.5px</p>
<h3 id="五、dp和sp"><a href="#五、dp和sp" class="headerlink" title="五、dp和sp"></a>五、dp和sp</h3><p>dp和sp都是安卓的开发单位，dp是长度单位，sp是字体单位。sp与dp类似，但是可以根据用户的字体大小首选项进行缩放。Android系统允许用户自定义文字尺寸大小（小、正常、大、超大等等），</p>
<p><strong>公式五：当文字尺寸是“正常”时1sp=1dp，而当文字尺寸是“大”或“超大”时，1sp&gt;1dp。</strong></p>
<p>一般情况下可认为sp=dp。</p>
<p>总结：由于做设计时以xhdpi为模板，xhdpi条件下，1dp=2px。若新建画布时，将画布分辨率设为144ppi，则1pt=2px=1dp。此时，即可将pt等同于dp。标注长度的时候，将长度像素除以2即为dp值。</p>
<p>PS：在photoshop cc中切图时，可直接在.png 图片图层名称前加上200%获得2倍大小的图，其他比例的切图以此类推。输出的两倍图不模糊的前提是，该图是photoshop中用形状工具画出来的未被栅格化的图形，而不是已被栅格化的图层或外部导入的图片。</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="http://www.woshipm.com/pmd/176328.html" target="_blank" rel="noopener">八一八那些px、pt、ppi、dpi、dp、sp之间的关系</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-05-18 </div>
			<div class="article-title"><a href="/2018/05/18/2018-05-18-html-responsive-img/" >响应式图片(十三)</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>在这篇文章中我们将学习关于响应式图片——一种可以在不同的屏幕尺寸和分辨率的设备上都能良好工作以及其他特性的图片，并且看看 HTML 提供了什么工具来帮助实现它们。响应式图片仅仅只是响应式web设计的一部分（奠定了响应式web设计的良好基础），我们会在未来的<a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" target="_blank" rel="noopener">CSS topic</a>模块中学到更多关于这一主题的知识。</p>
<p>目的: | 学习如何使用 <code>[srcset](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-srcset)</code> 以及 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture" target="_blank" rel="noopener" title="HTML &lt;picture&gt; 元素是一个容器，用来为其内部特定的 &lt;img&gt; 元素提供多样的 &lt;source&gt; 元素。浏览器会根据当前页面（即图片所在的盒子的容器）的布局以及当前浏览的设备（比如普通的屏幕和高清屏幕）去从中选择最合适的资源。"><code>&lt;picture&gt;</code></a> 元素，来实现网页中的响应式图片处理方法。</p>
<h2 id="一、为什么要用自适应的图片？"><a href="#一、为什么要用自适应的图片？" class="headerlink" title="一、为什么要用自适应的图片？"></a>一、为什么要用自适应的图片？</h2><p>我们会遇到什么样的问题需要用响应式图片来解决呢？让我们看看一个典型的场景。一个典型的网站可能会有一张页眉图片让访问者看起来感到愉快。可能会在图片下面添加一些内容图像。你可能想让头部（header）能跨越页眉（header）的全部宽度。并且内容图像适合内容纵列的某处。让我们看一个简单的例子：</p>
<p><img src="https://mdn.mozillademos.org/files/12940/picture-element-wide.png" alt="Our example site as viewed on a wide screen - here the first image works ok, as it is big enough to see the detail in the center."></p>
<p>这个网页在宽屏设备上表现良好，例如笔记本电脑或台式机（你可以<a href="http://mdn.github.io/learning-area/html/multimedia-and-embedding/responsive-images/not-responsive.html" target="_blank" rel="noopener">see the example live</a> 并且在GitHub上查看 <a href="https://github.com/mdn/learning-area/blob/master/html/multimedia-and-embedding/responsive-images/not-responsive.html" target="_blank" rel="noopener">source code</a> ）。我们不会过多的讨论CSS，除了：</p>
<ul>
<li>正文内容被设置的最大宽度为1200像素—在高于该宽度的视口中，正文保持在1200像素，并将其本身置于可用空间的中间。在该宽度以下的视口中，正文将保持在视口宽度的100%。</li>
<li>页眉图像被设置为使其中心始终位于头部的中心，无论头部的宽度是多少。所以如果网站被显示在窄屏上，图片中心的重要细节（里面的人）仍然可以看到，而两边超出的部分都消失了。它的高度是200px。</li>
<li>内容图片已经被设置为如果body元素比图像更小，图像就开始缩小，这样图像总是在正文里，而不是溢出正文。</li>
</ul>
<p>虽然这还能看，但是当你尝试在一个狭小的屏幕设备上查看本页面时，网页的头部看起来还可以，但是头部这张图片占据了屏幕的一大部分的高度，这真的很糟糕啊，而且这种情况下你仅仅只能看到人，旁边的树少了很多。</p>
<p><img src="https://mdn.mozillademos.org/files/12936/non-responsive-narrow.png" alt="Our example site as viewed on a narrow screen; the first image has shrunk to the point where it is hard to make out the detail on it."></p>
<p>当网站在狭窄的屏幕上观看时，会显示一幅图片的裁剪版本，裁剪版本有重要的细节，而对于像平板电脑这样的中等宽度的屏幕设备来说，也许是两者之间的东西—这通常被称之为<strong>艺术方向问题（art direction problem）</strong>。</p>
<p>另外，如果是在小屏手机屏幕上显示网页，那么没有必要在网页上嵌入这样大的图片。这被称之为<strong>分辨率切换问题（resolution switching problem）</strong>—一张位图被设置为固定像素的宽和高。当我们看<a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web" target="_blank" rel="noopener">矢量图形</a>时，我们会看到当位图大于其原始的尺寸时开始变得模糊（矢量图形不会变模糊）。如果位图的显示尺寸比原始尺寸小，就会浪费带宽——当可以使用小图片用于设备时，手机用户尤其不愿意通过下载用于桌面的大图像浪费带宽。理想的情况是当访问网站时依靠不同的设备来提供不同的分辨率图片和不同尺寸的图片。</p>
<p>让事情变得复杂的是，有些设备有很高的分辨率，为了显示的更出色，可能需要超出你预料的更大的图像。这从本质上是一样的问题，但在环境上有一些不同。</p>
<p>你可能会认为矢量图形能解决这些问题，在某种程度上是这样的——它们无论是文件大小还是比例都合适，无论在哪里你都应该尽可能的使用它们。然而，它们并不适合所有的图片类型，虽然在简单图形、图案、界面元素等方面较好，但如果是有大量的细节的照片，创建矢量图像会变得非常复杂。像JPEG格式这样的位图会更适合上面例子中的图像。</p>
<p>当web第一次出现时，这样的问题并不存在，在上世纪90年代中期，仅仅可以通过笔记本电脑和台式机来浏览web页面，所以浏览器开发者和规范制定者甚至没有想到要实现这种解决方式（响应式开发）。最近应用的响应式图像技术，通过让浏览器提供多个图像文件来解决上述问题，比如使用相同显示效果的图片但包含多个不同的分辨率（分辨率切换），或者使用不同的图片以适应不同的空间分配（艺术方向）。</p>
<p><strong>注意</strong>: 在这篇文章中讨论的新特性 — <code>[srcset](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-srcset)</code>/<code>[sizes](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-sizes)</code>/<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture" target="_blank" rel="noopener" title="HTML &lt;picture&gt; 元素是一个容器，用来为其内部特定的 &lt;img&gt; 元素提供多样的 &lt;source&gt; 元素。浏览器会根据当前页面（即图片所在的盒子的容器）的布局以及当前浏览的设备（比如普通的屏幕和高清屏幕）去从中选择最合适的资源。"><code>&lt;picture&gt;</code></a> — 都已经被新版本的现代浏览器和移动浏览器所支持（包括Edge，而不是IE）。</p>
<h2 id="二、怎样创建自适应的图片"><a href="#二、怎样创建自适应的图片" class="headerlink" title="二、怎样创建自适应的图片?"></a>二、怎样创建自适应的图片?</h2><p>在这一部分中，我们将看看上面说明的两个问题，并且展示怎样用HTML的响应式图片来解决这些问题。需要注意的是，如以上示例所示，在本节中我们将专注于HTML的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img" target="_blank" rel="noopener" title="HTML Image 元素（ &lt;img&gt; ）代表文档中的一个图像。"><code>&lt;img&gt;</code></a>，但网站页眉的图片仅是装饰性的，实际上应该要用CSS的背景图片来实现。<a href="http://blog.cloudfour.com/responsive-images-101-part-8-css-images/" target="_blank" rel="noopener">CSS是比HTML更好的响应式设计的工具</a>，我们会在未来的CSS模块中讨论。</p>
<h3 id="2-1-分辨率切换：不同的尺寸"><a href="#2-1-分辨率切换：不同的尺寸" class="headerlink" title="2.1 分辨率切换：不同的尺寸"></a>2.1 分辨率切换：不同的尺寸</h3><p>那么，我们想要用分辨率切换解决什么问题呢？我们想要显示相同的图片内容，仅仅依靠设备来显示更大或更小的图片——这是我们在示例中使用第二个内容图像的情况。标准的<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img" target="_blank" rel="noopener" title="HTML Image 元素（ &lt;img&gt; ）代表文档中的一个图像。"><code>&lt;img&gt;</code></a>元素传统上仅仅让你给浏览器指定唯一的资源文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"elva-fairy-800w.jpg"</span> <span class="attr">alt</span>=<span class="string">"Elva dressed as a fairy"</span>&gt;</span></span></pre></td></tr></table></figure>

<p>我们可以使用两个新的属性——<code>[srcset](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-srcset)</code> 和 <code>[sizes](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-sizes)</code>——来提供更多额外的资源图像和提示，帮助浏览器选择正确的一个资源。你可以看到 <a href="http://mdn.github.io/learning-area/html/multimedia-and-embedding/responsive-images/responsive.html" target="_blank" rel="noopener">reponsive.html</a> 的例子，也可以在GitHub上看到<a href="https://github.com/mdn/learning-area/blob/master/html/multimedia-and-embedding/responsive-images/responsive.html" target="_blank" rel="noopener">source code</a>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">srcset</span>=<span class="string">"elva-fairy-320w.jpg 320w,</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag"><span class="string">             elva-fairy-480w.jpg 480w,</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag"><span class="string">             elva-fairy-800w.jpg 800w"</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="tag">     <span class="attr">sizes</span>=<span class="string">"(max-width: 320px) 280px,</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="tag"><span class="string">            (max-width: 480px) 440px,</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="tag"><span class="string">            800px"</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="tag">     <span class="attr">src</span>=<span class="string">"elva-fairy-800w.jpg"</span> <span class="attr">alt</span>=<span class="string">"Elva dressed as a fairy"</span>&gt;</span></span></pre></td></tr></table></figure>

<p><code>srcset</code>和<code>sizes</code>属性看起来很复杂，但是如果你按照上图所示进行格式化，那么他们并不是很难理解，每一行有不同的属性值。每个值都包含逗号分隔的列表。列表的每一部分由三个子部分组成。让我们来看看现在的每一个内容：</p>
<p><strong>srcset</strong>定义了我们允许浏览器选择的图像集，以及每个图像的大小。在每个逗号之前，我们写：</p>
<ol>
<li>一个<strong>文件名</strong> (<code>elva-fairy-480w.jpg</code>.)</li>
<li>一个空格</li>
<li><strong>图像的固有宽度</strong>（以像素为单位）（480w）——注意到这里使用<code>w</code>单位，而不是你预计的<code>px</code>。这是图像的真实大小，可以通过检查你电脑上的图片文件找到（例如，在Mac上，你可以在Finder上选择这个图像，然后按 <kbd>Cmd</kbd> + <kbd>I</kbd> 来显示信息）。</li>
</ol>
<p><code>**sizes**</code>定义了一组媒体条件（例如屏幕宽度）并且指明当某些媒体条件为真时，什么样的图片尺寸是最佳选择—我们在之前已经讨论了一些提示。在这种情况下，在每个逗号之前，我们写：</p>
<ol>
<li>一个<strong>媒体条件</strong>（<code>(max-width:480px)</code>）——你会在 <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" target="_blank" rel="noopener">CSS topic</a>中学到更多的。但是现在我们仅仅讨论的是媒体条件描述了屏幕可能处于的状态。在这里，我们说“当视窗的宽度是480像素或更少”。</li>
<li>一个空格</li>
<li>当媒体条件为真时，图像将填充的<strong>槽的宽度</strong>（<code>440px</code>）</li>
</ol>
<p><strong>注意</strong>: 对于槽的宽度，你也许会提供一个固定值 (<code>px</code>, <code>em</code>) 或者是一个相对值（比如百分比）你也许以及注意到最后一个槽的宽度是没有媒体条件的，它是默认的，当没有任何一个媒体条件为真时，它就会生效。 当浏览器成功匹配第一个媒体条件的时候，剩下所有的东西都会被忽略，所以要注意媒体条件的顺序。</p>
<p>所以，有了这些属性，浏览器会：</p>
<ol>
<li>查看设备宽度</li>
<li>检查<code>sizes</code>列表中哪个媒体条件是第一个为真</li>
<li>查看给予该媒体查询的槽大小</li>
<li>加载<code>srcset</code>列表中引用的最接近所选的槽大小的图像</li>
</ol>
<p>就是这样！所以在这里，如果支持浏览器以视窗宽度为480px来加载页面，那么<code>(max-width: 480px)</code>的媒体条件为真，因此<code>440px</code>的槽会被选择，所以<code>elva-fairy-480w.jpg</code>将加载，因为它的的固定宽度（<code>480w</code>）最接近于<code>440px</code>。800px的照片大小为128KB而480px版本仅有63KB大小—节省了65KB。现在想象一下，如果这是一个有很多图片的页面。使用这种技术会节省移动端用户的大量带宽。</p>
<p>老旧的浏览器不支持这些特性，它会忽略这些特征。并继续正常加载 <code>[src](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-src)</code>属性引用的图像文件。</p>
<p><strong>注意</strong>: 在 HTML 文件中的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/head" target="_blank" rel="noopener" title="HTML head 元素 规定文档相关的通用信息（元数据），包括文档的标题，文档的样式和脚本的链接（定义）等。"><code>&lt;head&gt;</code></a> 标签里， 你将会找到这一行代码 <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</code>: 这行代码会强制地让手机浏览器采用它们真实视图的宽度来加载网页（有些手机浏览器会提供不真实的视图宽度, 然后加载比浏览器真实视图的宽度大的宽度的网页，然后再缩小加载的页面，这样的做法对响应式图片或其他设计，没有任何帮助。我们会在未来的模块教给你更多关于这方面的知识）。</p>
<h3 id="2-2-一些有用的开发工具"><a href="#2-2-一些有用的开发工具" class="headerlink" title="2.2 一些有用的开发工具"></a>2.2 一些有用的开发工具</h3><p>这里有一些在浏览器中的非常实用的<a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools" target="_blank" rel="noopener">开发者工具</a>用来帮助制定重要的槽宽度，以及其他你可能会用到的场景。当我在设置槽宽度的时候，我先加载了示例中的无响应的版本（<code>not-responsive.html</code>），然后进入 <a href="https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_Mode" target="_blank" rel="noopener">响应设计视图</a> （_Tools &gt; Web Developer &gt; Responsive Design View），_这个工具允许你在不同设备的屏幕宽度场景下查看网页的布局。</p>
<p>我设置我的视图宽度为 320px，然后再改为 480px；每一次宽度的改变我就进入 <a href="https://developer.mozilla.org/en-US/docs/Tools/Page_Inspector" target="_blank" rel="noopener">DOM 检查 </a>，点击我们感兴趣的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img" target="_blank" rel="noopener" title="HTML Image 元素（ &lt;img&gt; ）代表文档中的一个图像。"><code>&lt;img&gt;</code></a> 元素，然后在显示屏右侧的 Box Model 视图选项卡中查看它的大小。 你应该会看到，这种无响应式的做法会让你的图片在不同屏幕宽度下有着固定的宽度。</p>
<p><img src="https://mdn.mozillademos.org/files/12932/box-model-devtools.png" alt="A screenshot of the firefox devtools with an image element highlighted in the dom, showing its dimensions as 440 by 293 pixels."></p>
<p>接着, 你可以检查 <code>srcset</code> 是否正常工作，你需要将视图的宽度设置为你想要的，(比如，把宽度设置的比较小，让页面看起来比较狭窄），打开网络检查（_Tools &gt; Web Developer &gt; Network），_然后重新加载页面。网络检查工具会给你一个列表，里面的文件都是已经被下载来构造网页的。然后你可以在这里看到哪个图像文件被下载了。</p>
<p><img src="https://mdn.mozillademos.org/files/12934/network-devtools.png" alt="a screenshot of the network inspector in firefox devtools, showing that the HTML for the page has been downloaded, along with three images, which include the two 800 wide versions of the responsive images"></p>
<h3 id="2-3-分辨率切换-相同的尺寸-不同的分辨率"><a href="#2-3-分辨率切换-相同的尺寸-不同的分辨率" class="headerlink" title="2.3 分辨率切换: 相同的尺寸, 不同的分辨率"></a>2.3 分辨率切换: 相同的尺寸, 不同的分辨率</h3><p>如果你支持多种分辨率显示，但希望每个人在屏幕上看到的图片的实际尺寸是相同的，你可以让浏览器通过<code>srcset</code>和x语法结合——一种更简单的语法——而不用<code>sizes</code>，来选择适当分辨率的图片。你可以看一个例子 <a href="http://mdn.github.io/learning-area/html/multimedia-and-embedding/responsive-images/srcset-resolutions.html" target="_blank" rel="noopener">srcset-resolutions.html</a>（或 <a href="https://github.com/mdn/learning-area/blob/master/html/multimedia-and-embedding/responsive-images/srcset-resolutions.html" target="_blank" rel="noopener">the source code</a>）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">srcset</span>=<span class="string">"elva-fairy-320w.jpg,</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag"><span class="string">             elva-fairy-480w.jpg 1.5x,</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag"><span class="string">             elva-fairy-640w.jpg 2x"</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="tag">     <span class="attr">src</span>=<span class="string">"elva-fairy-640w.jpg"</span> <span class="attr">alt</span>=<span class="string">"Elva dressed as a fairy"</span>&gt;</span></span></pre></td></tr></table></figure>

<p><img src="https://mdn.mozillademos.org/files/12942/resolution-example.png" alt="A picture of a little girl dressed up as a fairy, with an old camera film effect applied to the image">在这个例子中，下面的CSS会应用在图片上，所以它的宽度在屏幕上是320像素（也称作CSS像素）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="attribute">width</span>: <span class="number">320px</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>在这种情况下，<code>sizes</code>并不需要——浏览器只是计算出正在显示的显示器的分辨率，然后提供<code>srcset</code>引用的最适合的图像。因此，如果访问页面的设备具有标准/低分辨率显示，一个设备像素表示一个CSS像素，<code>elva-fairy-320w.jpg</code>会被加载（1x 是默认值，所以你不需要写出来）。如果设备有高分辨率，两个或更多的设备像素表示一个CSS像素，<code>elva-fairy-640w.jpg</code> 会被加载。640px的图像大小为93KB，320px的图像的大小仅仅有39KB。</p>
<h3 id="2-4-艺术方向"><a href="#2-4-艺术方向" class="headerlink" title="2.4 艺术方向"></a>2.4 艺术方向</h3><p>回顾一下，<strong>艺术方向问题</strong>涉及要更改显示的图像以适应不同的图像显示尺寸。例如，如果在桌面浏览器上的一个网站上显示一张大的、横向的照片，照片中央有个人，然后当在移动端浏览器上浏览这个网站时，照片会缩小，这时照片上的人会变得非常小，看起来会很糟糕。这种情况可能在移动端显示一个更小的肖像图会更好，这样人物的大小看起来更合适。<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture" target="_blank" rel="noopener" title="HTML &lt;picture&gt; 元素是一个容器，用来为其内部特定的 &lt;img&gt; 元素提供多样的 &lt;source&gt; 元素。浏览器会根据当前页面（即图片所在的盒子的容器）的布局以及当前浏览的设备（比如普通的屏幕和高清屏幕）去从中选择最合适的资源。"><code>&lt;picture&gt;</code></a>元素允许我们这样实现。</p>
<p>回到我们最初的例子 <a href="http://mdn.github.io/learning-area/html/multimedia-and-embedding/responsive-images/not-responsive.html" target="_blank" rel="noopener">not-responsive.html</a> ，我们有一张图片需要艺术方向：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"elva-800w.jpg"</span> <span class="attr">alt</span>=<span class="string">"Chris standing up holding his daughter Elva"</span>&gt;</span></span></pre></td></tr></table></figure>

<p>让我们改用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture" target="_blank" rel="noopener" title="HTML &lt;picture&gt; 元素是一个容器，用来为其内部特定的 &lt;img&gt; 元素提供多样的 &lt;source&gt; 元素。浏览器会根据当前页面（即图片所在的盒子的容器）的布局以及当前浏览的设备（比如普通的屏幕和高清屏幕）去从中选择最合适的资源。"><code>&lt;picture&gt;</code></a>！就像<a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content" target="_blank" rel="noopener"><code>&lt;video&gt;</code>和<code>&lt;audio&gt;</code></a>，<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture" target="_blank" rel="noopener" title="HTML &lt;picture&gt; 元素是一个容器，用来为其内部特定的 &lt;img&gt; 元素提供多样的 &lt;source&gt; 元素。浏览器会根据当前页面（即图片所在的盒子的容器）的布局以及当前浏览的设备（比如普通的屏幕和高清屏幕）去从中选择最合适的资源。"><code>&lt;picture&gt;</code></a>素包含了一些<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/source" target="_blank" rel="noopener" title="The HTML &lt;source&gt; element specifies multiple media resources for either the &lt;picture&gt;, the &lt;audio&gt; or the &lt;video&gt; element. It is an empty element. It is commonly used to serve the same media content in multiple formats supported by different browsers."><code>&lt;source&gt;</code></a>元素，它使浏览器在不同资源间做出选择，紧跟着的是最重要的<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img" target="_blank" rel="noopener" title="HTML Image 元素（ &lt;img&gt; ）代表文档中的一个图像。"><code>&lt;img&gt;</code></a>元素。<a href="http://mdn.github.io/learning-area/html/multimedia-and-embedding/responsive-images/responsive.html" target="_blank" rel="noopener">responsive.html</a> 的代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">media</span>=<span class="string">"(max-width: 799px)"</span> <span class="attr">srcset</span>=<span class="string">"elva-480w-close-portrait.jpg"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">media</span>=<span class="string">"(min-width: 800px)"</span> <span class="attr">srcset</span>=<span class="string">"elva-800w.jpg"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"elva-800w.jpg"</span> <span class="attr">alt</span>=<span class="string">"Chris standing up holding his daughter Elva"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span></pre></td></tr></table></figure>

<ul>
<li><code>&lt;source&gt;</code>元素包含一个<code>media</code>属性，这一属性包含一个媒体条件——就像第一个<code>srcset</code>例子，这些条件来决定哪张图片会显示——第一个条件返回真，那么就会显示这张图片。在这种情况下，如果视窗的宽度为799px或更少，第一个<code>&lt;source&gt;</code>元素的图片就会显示。如果视窗的宽度是800px或更大，就显示第二张图片。</li>
<li><code>srcset</code>属性包含要显示图片的路径。请注意，正如我们在<code>&lt;img&gt;</code>上面看到的那样，<code>&lt;source&gt;</code>可以使用引用多个图像的<code>srcset</code>属性，还有<code>sizes</code>属性。所以你可以通过一个 <code>&lt;picture&gt;</code>元素提供多个图片，不过也可以给每个图片提供多分辨率的图片。实际上，你可能不想经常做这样的事情。</li>
<li>在任何情况下，你都必须在 <code>&lt;/picture&gt;</code>之前正确提供一个<code>&lt;img&gt;</code>元素以及它的<code>src</code>和<code>alt</code>属性，否则不会有图片显示。当媒体条件都不返回真的时候（你可以在这个例子中删除第二个<code>&lt;source&gt;</code> 元素），它会提供图片；如果浏览器不支持 <code>&lt;picture&gt;</code>元素时，它可以作为后备方案。</li>
</ul>
<p>这样的代码允许我们在宽屏和窄屏上都能显示合适的图片，像下面展示的一样：</p>
<p><img src="https://mdn.mozillademos.org/files/12940/picture-element-wide.png" alt="Our example site as viewed on a wide screen - here the first image works ok, as it is big enough to see the detail in the center."><img src="https://mdn.mozillademos.org/files/12938/picture-element-narrow.png" alt="Our example site as viewed on a narrow screen with the picture element used to switch the first image to a portrait close up of the detail, making it a lot more useful on a narrow screen"></p>
<p><strong>注意</strong>: 你应该仅仅当在艺术方向场景下使用media属性；当你使用media时，不要在sizes属性中也提供媒体条件。</p>
<h3 id="2-5-为什么我们不能使用-CSS-或-JavaScript-来做到这一效果"><a href="#2-5-为什么我们不能使用-CSS-或-JavaScript-来做到这一效果" class="headerlink" title="2.5 为什么我们不能使用 CSS 或 JavaScript 来做到这一效果?"></a>2.5 为什么我们不能使用 CSS 或 JavaScript 来做到这一效果?</h3><p>当浏览器开始加载一个页面, 它会先下载 (预加载) 任意的图片，这是发生在主解析器开始加载和解析页面的 CSS 和 JavaScript 之前的。这是一个非常有用的技巧，平均来说，页面加载的时间少了 20%。但是, 这对响应式图片一点帮助都没有, 所以需要实现类似 <code>srcset</code>的方法。因为你不能先加载好 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img" target="_blank" rel="noopener" title="HTML Image 元素（ &lt;img&gt; ）代表文档中的一个图像。"><code>&lt;img&gt;</code></a> 元素后, 再用 JavaScript 检测视图的宽度，如果觉得大小不合适，就动态地加载小的图片替换已经加载好的图片，这样的话, 原始的图像已经被加载了, 然后你也加载了小的图像, 这样的做法对于响应式图像的理念来说，是很糟糕的。</p>
<h3 id="2-6-大胆的使用现代图像格式"><a href="#2-6-大胆的使用现代图像格式" class="headerlink" title="2.6 大胆的使用现代图像格式"></a>2.6 大胆的使用现代图像格式</h3><p>有很多令人激动的新图像格式（例如WebP和JPEG-2000）可以在有高质量的同时有较低的文件大小。然而，浏览器对其的支持参差不齐。</p>
<p><code>&lt;picture&gt;</code>让我们能继续满足老式浏览器的需要。你可以在<code>type</code>属性中提供MIME类型，这样浏览器就能立即拒绝其不支持的文件类型：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">type</span>=<span class="string">"image/svg+xml"</span> <span class="attr">srcset</span>=<span class="string">"pyramid.svg"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">type</span>=<span class="string">"image/webp"</span> <span class="attr">srcset</span>=<span class="string">"pyramid.webp"</span>&gt;</span> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"pyramid.png"</span> <span class="attr">alt</span>=<span class="string">"regular pyramid built from four equilateral triangles"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span></pre></td></tr></table></figure>

<ul>
<li>不要使用<code>media</code>属性，除非你也需要艺术方向。</li>
<li>在<code>&lt;source&gt;</code> 元素中，你只可以引用在<code>type</code>中声明的文件类型。</li>
<li>像之前一样，如果必要，你可以在<code>srcset</code>和<code>sizes</code>中使用逗号分割的列表。</li>
</ul>
<h2 id="三、主动学习：实现属于你的响应式图像"><a href="#三、主动学习：实现属于你的响应式图像" class="headerlink" title="三、主动学习：实现属于你的响应式图像"></a>三、主动学习：实现属于你的响应式图像</h2><p>在这次主动学习中，我们希望你变得勇敢和自力更生……我们希望你把自己拍摄的艺术截图，通过 <code>&lt;picture&gt;</code>来实现在窄屏幕和宽屏幕下的显示，以及使用 <code>srcset</code>切换不同的分辨率。</p>
<ol>
<li>写一些简单 HTML 来包含你的代码（如果你喜欢，也可以使用 <code>not-responsive.html</code> 作为起点）。</li>
<li>找一张漂亮的宽屏风景图像，其中需要包含一些细节。使用图像编辑器创建一个网页大小的版本。然后裁剪一下，显示一个更小的部分，其中包含放大的细节, 然后创建第二张图片 (差不多 480px 宽度比较好。)</li>
<li>使用 <code>&lt;picture&gt;</code> 元素来实现艺术图片切换器！</li>
<li>创建不同大小的多张图片, 每个图片的图像都是一样的。</li>
<li>使用 <code>srcset</code>/<code>size</code> 来创建一个分辨率切换器示例, 可以在不同的分辨率的情况下，提供相同尺寸的图像, 或者在不同的视图大小的情况下，提供不同尺寸大小的图像。</li>
</ol>
<p><strong>注意</strong>: 使用浏览器开发工具来帮助你工作时可以得到你需要的视图大小，就像上文提到的。</p>
<h2 id="四、小结"><a href="#四、小结" class="headerlink" title="四、小结"></a>四、小结</h2><p>这章节中充满了响应式图像 — 我们希望你学习新技术的过程是享受的。概括来说，有两个不同的问题，文章中我们一直在讨论：</p>
<ul>
<li><strong>艺术方向</strong>：当你想为不同布局提供不同剪裁的图片——比如在桌面布局上显示完整的、横向图片，而在手机布局上显示一张剪裁过的、突出重点的纵向图片，可以用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture" target="_blank" rel="noopener" title="HTML &lt;picture&gt; 元素是一个容器，用来为其内部特定的 &lt;img&gt; 元素提供多样的 &lt;source&gt; 元素。浏览器会根据当前页面（即图片所在的盒子的容器）的布局以及当前浏览的设备（比如普通的屏幕和高清屏幕）去从中选择最合适的资源。"><code>&lt;picture&gt;</code></a> 元素来实现。</li>
<li><strong>分辨率切换</strong>：当你想要为窄屏提供更小的图片时，因为小屏幕不需要像桌面端显示那么大的图片；以及你想为高/低分辨率屏幕提供不同分辨率的图片时，都可以通过 <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web" target="_blank" rel="noopener">vector graphics</a> (SVG images)、 <code>[srcset](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-srcset)</code> 以及 <code>[sizes](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#attr-sizes)</code> 属性来实现。</li>
</ul>
<p>此时整个<a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding" target="_blank" rel="noopener">Multimedia and embedding</a> 模块接近尾声！在继续下一个模块之前，你现在唯一要做的就是尝试我们的多媒体评估，看看你做得怎样。玩的开心。</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images" target="_blank" rel="noopener">响应式图片</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-05-15 </div>
			<div class="article-title"><a href="/2018/05/15/2018-05-15-html-font-rending/" >认识字体渲染</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<blockquote>
<p>在 Mac OS 系统上对网页截屏，然后打开图片不断放大观察。你会发现黑色的文字居然不完全是纯黑色的！（Windows 7下IE9使用微软雅黑字体也可以看到这个现象）。肿么回事，这不科学！读完这篇文章后你就都懂了。</p>
</blockquote>
<p><img src="https://ksmx.me/content/images/2013/09/cover.png" alt="post cover"></p>
<p>为什么相同的字体，在Mac OS上的显示效果「看起来」要比Windows上好看？这个问题我一直没有搞清楚，昨天偶尔看到有关字体渲染方面的一篇文章：<a href="http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/" target="_blank" rel="noopener">《A Closer Look At Font Rendering》</a>，终于对字体渲染有了一些认识。这篇文章是我对字体渲染知识的归纳总结，只挑重点写。</p>
<h2 id="一、一个理想和三种实现（渲染策略，Rendering-Strategies）"><a href="#一、一个理想和三种实现（渲染策略，Rendering-Strategies）" class="headerlink" title="一、一个理想和三种实现（渲染策略，Rendering Strategies）"></a>一、一个理想和三种实现（渲染策略，Rendering Strategies）</h2><h3 id="1-1-理想的形状"><a href="#1-1-理想的形状" class="headerlink" title="1.1 理想的形状"></a>1.1 理想的形状</h3><p><img src="https://ksmx.me/content/images/2013/09/ideal_shape.png" alt="理想的形状（ideal shape）"></p>
<p>理想中的文字，指的是使用矢量图形描述出来的形状。矢量图形是在计算机图形学中使用数学方程表达的几何形状（点、线和多边形等）来绘制图像。这样抽象的描述可能比较难懂，可以理解为矢量图形是「e这个字母的形状是数字9翻转过来的图形」这种描述的数学版。</p>
<p>如何将这种抽象形状描述转化为展示在显示器上字体呢？这需要引入一个新的术语——栅格化（Rasterization），栅格化指的是将理想中的形状转化为一个一个像素的这个过程。我们的显示器、手机屏幕实际上都是有无数个发光的像素点构成的，它们在单位面积排列得越密集显示效果越精细（PPI，像素密度）。你可能已经注意到，理想形状示意图里的字母e并不能和灰色的网格（可以理解为像素点）对应起来，尤其是曲线的边缘，只占了网格的一部分。由于我们所能控制的最小单位就是像素，便造成了理想和现实间的差距，如何让以像素为基础的屏幕更好的表达我们理想中的文字形状，牛X的前辈们发明了三种字体渲染策略，后面一一道来。</p>
<h3 id="1-2-初代：黑白渲染（black-and-white-rendering）"><a href="#1-2-初代：黑白渲染（black-and-white-rendering）" class="headerlink" title="1.2 初代：黑白渲染（black-and-white rendering）"></a>1.2 初代：黑白渲染（black-and-white rendering）</h3><p><img src="https://ksmx.me/content/images/2013/09/black_and_white_rendering.png" alt="黑白渲染（black-and-white rendering）"></p>
<p>黑白渲染是最早人们使用的渲染技术，这种渲染方式只使用黑白两种颜色来表达文字的形状。还记得Windows的蓝天白云界面上的文字显示效果吗？还有Dos和PC机器启动时候的提示文字，都使用了这种渲染方法。在显示屏幕上，少量的像素点并不能很好地传达字体微妙的形状变化，在圆的边缘轮廓上我们就会发现锯齿。这时字体渲染技术还处在初级阶段。</p>
<h3 id="1-3-二代：灰度渲染（Grayscale-rendering）"><a href="#1-3-二代：灰度渲染（Grayscale-rendering）" class="headerlink" title="1.3 二代：灰度渲染（Grayscale rendering）"></a>1.3 二代：灰度渲染（Grayscale rendering）</h3><p><img src="https://ksmx.me/content/images/2013/09/grayscale_rendering.png" alt="灰度渲染（Grayscale rendering）"></p>
<p>在上世纪90年代中期，我们的前辈们开始使用一种非常巧妙的方法，可以说是黑白渲染的优化版。灰度渲染可以控制每个像素的明暗，让字形边界看起来过渡平滑。处于字形边界上的像素亮度取决于自身被理想形状所覆盖的面积比值。这样，字体轮廓看起来就更平滑，字体设计的细节也得以再现。字体在屏幕上看起不仅清晰——而且还能体现字体本身特征及风格。我们人眼和大脑在解读灰色像素中信息时，将它转换为了形状的轮廓，因此我们感觉这样渲染后的效果更加接近原始的形状。</p>
<h3 id="1-4-三代：亚像素渲染（Subpixel-rendering）"><a href="#1-4-三代：亚像素渲染（Subpixel-rendering）" class="headerlink" title="1.4 三代：亚像素渲染（Subpixel rendering）"></a>1.4 三代：亚像素渲染（Subpixel rendering）</h3><p><img src="https://ksmx.me/content/images/2013/09/subpixel_rendering.png" alt="亚像素渲染（Subpixel rendering）"></p>
<p>隆重介绍 <a href="http://en.wikipedia.org/wiki/Subpixel_rendering" target="_blank" rel="noopener">亚像素渲染</a>，第三代渲染技术，它一个重要特征是引入彩色像素。如果我们将屏幕截屏放大，发现字体边缘呈红色和蓝色，那么我们就可以知道它采用的是亚像素渲染技术。 有趣的是，这一渲染技术和显示技术的发展是息息相关的，在液晶显示屏（LCD）上，一个像素是由红、绿、蓝三个子（亚）像素构成的，LCD能够做到单独控制每一个子像素的开关。LCD屏幕像素在显微镜下的样子：</p>
<p><img src="https://ksmx.me/content/images/2013/09/lcd_display.png" alt="LCD液晶显示屏像素构成"></p>
<p>因为这些子像素非常小，以至于人眼无法察觉到他们是一个个独立的颜色点。与单纯的灰度渲染相比，水平方向的分辨率翻了三倍。竖笔的位置及粗细就可表现的更为精确，文本外观也就更为清晰。</p>
<p>通过观察，我还发现亚像素渲染总是把暖色放在左边（如上图的红），冷色（如上图的蓝）放在右边，据我自己的猜想这很有可能与从左向右的阅读顺序有关。这样的设计从视觉上会感受到光源是从左边进入，增加字体的立体感，让阅读更加舒适。（这仅仅是我个人的猜测，如何有人能从色彩原理上解释这一点，请一定要告诉我）</p>
<p>下面图片是我在Mac OS上的Finder侧边栏截图放大，仔细观察文字后半部分能体现出这种微妙的感觉：</p>
<p><img src="https://ksmx.me/content/images/2013/09/mac_os_screenshot.png" alt="Mac OS系统Finder截图放大效果"></p>
<h2 id="二、在各种操作系统中的应用情况"><a href="#二、在各种操作系统中的应用情况" class="headerlink" title="二、在各种操作系统中的应用情况"></a>二、在各种操作系统中的应用情况</h2><p>了解完了三种字体渲染策略，我们来看一下各种操作系统对渲染方式的选择。</p>
<h3 id="2-1-Windows系统"><a href="#2-1-Windows系统" class="headerlink" title="2.1 Windows系统"></a>2.1 Windows系统</h3><p>在Windows系统下，使用什么渲染技术取决于使用什么样的字体，以及应用程序的设置。Windows系统有两套图形文字渲染接口，一个是GDI，另一个是Windows Vista之后推出的DirectWrite，用于取代老的GDI。严格来说，微软自己的亚像素渲染技术有另一个名字——<a href="http://en.wikipedia.org/wiki/ClearType" target="_blank" rel="noopener">ClearType</a>，这个技术与两套图形文字渲染接口是被包含的关系。</p>
<p>ClearType在微软自家系统和程序中支持情况如下：</p>
<ul>
<li>Windows XP (off by default)</li>
<li>Windows Vista (on by default)</li>
<li>Windows 7 (on by default)</li>
<li>Microsoft Office 2007 and later (on by default)</li>
<li>Internet Explorer 7 and later (on by default)</li>
<li>Windows Live Messenger (on by default)</li>
</ul>
<p>字体渲染策略与浏览器和字体格式的关系：</p>
<p><img src="https://ksmx.me/content/images/2013/09/font_rendering_browser_support.png" alt="字体渲染策略与浏览器和字体格式的关系"></p>
<p>PS-webfonts指的是PostScript字体，TrueType 和 PostScript 区别在于在描绘曲线时所有的数学方法不一样，只有字体设计人员才需要了解两者的区别。感兴趣想要深入了解可以自己Google资料学习。</p>
<p>Windows系统为了兼容性，提供了大量的选择权给应用程序和系统，最终的结果是在Windows系统上的文字阅读体验不够统一，有的地方看上去不错，有的却无法直视。这和Windows系统整体的生态环境是息息相关的，它需要支持各种各样的屏幕和分辨率，再加上我们之前提到的亚像素渲染技术是和LCD液晶屏幕的物理属相息息相关的一项技术，不同的LCD像素排布都需要做相应的适配，加大微软完善这一体验的成本。</p>
<h3 id="2-2-Mac-OS-系统"><a href="#2-2-Mac-OS-系统" class="headerlink" title="2.2 Mac OS 系统"></a>2.2 Mac OS 系统</h3><p>在Mac OS系统上，所有浏览器使用的是Quartz渲染引擎，这个引擎据说非常可靠。TrueType和PostScript字体都是以同样的方式渲染的，也就是使用了亚像素渲染技术，渲染提示（hinting）被故意忽略了，而这正是两类字体在概念上最大的差别，Mac OS对PS和TrueType字体同等对待，不管它们那些不一样的特性。Mac OS的字体渲染技术不会试图理解构成字体的笔画及特征。字母形状不会解读，因而也就不会出现曲解的情况。另外苹果似乎也会应用一些精妙的自动化措施增强渲染效果，但是这类自增强的技术没有文档说明，我们无从得知这背后的细节。在Mac 上另外碰到的一个难以控制的现象是，字体会渲染的更重些。在文本字体大小下，这点差异尤其明显。同样的字体在Mac OS上看起来有点浓稠，而在Windows上则看起要清淡些。</p>
<p>Mac OS系统只运行在自己的Mac上，Apple在字体渲染方面更容易给用户一个统一的体验，再一次体现了软硬结合的优势。</p>
<h2 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h2><p>「Mac上字体看着比Windows好看」其实是几年前Windows XP时代的刻板映像。 应该来说，在不同操作系统上，字体渲染技术的区别正在缩小，随着微软DirectWirte的普及，Windows和Mac OS在字体渲染方面的区别仅在于他们对字体显示的理解和偏好。Joel Spolsky 的 <a href="http://www.joelonsoftware.com/items/2007/06/12.html" target="_blank" rel="noopener">《Font smoothing, anti-aliasing, and sub-pixel rendering》</a> 一文解释了两者的区别。</p>
<blockquote>
<p>苹果总体上认为，（字体渲染）算法的目标应尽可能还原字体的设计，即使代价是造成些许模糊。</p>
</blockquote>
<blockquote>
<p>微软认为，字符的形状应和像素契合，以防止模糊，提高可读性，即便扭曲了字体的构造。</p>
</blockquote>
<p>更令人惊叹的是，针对LCD优化的Subpixel rendering技术，居然在1977年的Apple II 的图形显示中就已经被发明了，比微软宣布ClearType技术整整早了22年。Steve Wozniak，Apple II的设计师和这项专利的拥有者对究竟是谁先发明了这项技术的回复如下：</p>
<blockquote>
<p>“Back in 1976, my design of the Apple II’s high resolution graphics system utilized a characteristic of the NTSC color video signal (called the ‘color subcarrier’) that creates a left to right horizontal distribution of available colors. By coincidence, this is exactly analogous to the R-G-B distribution of colored sub-pixels used by modern LCD display panels. So more than twenty years ago, Apple II graphics programmers were using this ‘sub-pixel’ technology to effectively increase the horizontal resolution of their Apple II displays.”</p>
</blockquote>
<p>具体的争论细节可以八卦 <a href="https://www.grc.com/ctwho.htm" target="_blank" rel="noopener">Sub-Pixel Font Rendering Technology - Who Di It First</a>。</p>
<p>虽然当时这项技术是运用在NTSC信号上的，但技术的思路都是一致的。乔帮主当时是有一个多牛X的技术团队呀，对帮主的敬畏有多出了几分！</p>
<p>最后，给大家留个悬念，在iPhone或者安卓手机上找一个网页打开截屏，图片拿到电脑上不断放大后，你会发现手机上的字体渲染并没有使用亚像素渲染，这是为什么呢？^_^ 答案留给你去寻找吧。</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ul>
<li><a href="https://ksmx.me/understanding-font-rendering/" target="_blank" rel="noopener">认识字体渲染</a></li>
</ul>

	
	</div>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/2/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/4/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Ajax/">Ajax<span>9</span></a></li>
		
			<li><a href="/categories/AliPay/">AliPay<span>1</span></a></li>
		
			<li><a href="/categories/Android/">Android<span>15</span></a></li>
		
			<li><a href="/categories/AngularJS/">AngularJS<span>4</span></a></li>
		
			<li><a href="/categories/BackEnd/">BackEnd<span>5</span></a></li>
		
			<li><a href="/categories/Backbone/">Backbone<span>1</span></a></li>
		
			<li><a href="/categories/Bootstrap/">Bootstrap<span>2</span></a></li>
		
			<li><a href="/categories/C-C/">C/C++<span>1</span></a></li>
		
			<li><a href="/categories/Car/">Car<span>1</span></a></li>
		
			<li><a href="/categories/Css/">Css<span>9</span></a></li>
		
			<li><a href="/categories/Css3/">Css3<span>4</span></a></li>
		
			<li><a href="/categories/Database/">Database<span>7</span></a></li>
		
			<li><a href="/categories/Design/">Design<span>1</span></a></li>
		
			<li><a href="/categories/Flutter/">Flutter<span>1</span></a></li>
		
			<li><a href="/categories/Git/">Git<span>1</span></a></li>
		
			<li><a href="/categories/Golang/">Golang<span>1</span></a></li>
		
			<li><a href="/categories/Hadoop/">Hadoop<span>1</span></a></li>
		
			<li><a href="/categories/Hexo/">Hexo<span>3</span></a></li>
		
			<li><a href="/categories/Html/">Html<span>18</span></a></li>
		
			<li><a href="/categories/Java/">Java<span>17</span></a></li>
		
			<li><a href="/categories/JavaScript/">JavaScript<span>82</span></a></li>
		
			<li><a href="/categories/Linux/">Linux<span>8</span></a></li>
		
			<li><a href="/categories/Node-js/">Node.js<span>40</span></a></li>
		
			<li><a href="/categories/Powershell/">Powershell<span>1</span></a></li>
		
			<li><a href="/categories/Python/">Python<span>4</span></a></li>
		
			<li><a href="/categories/Read/">Read<span>9</span></a></li>
		
			<li><a href="/categories/Synology/">Synology<span>1</span></a></li>
		
			<li><a href="/categories/Testing/">Testing<span>4</span></a></li>
		
			<li><a href="/categories/Tools/">Tools<span>16</span></a></li>
		
			<li><a href="/categories/Vue-js/">Vue.js<span>10</span></a></li>
		
			<li><a href="/categories/WeChat/">WeChat<span>4</span></a></li>
		
			<li><a href="/categories/jQuery/">jQuery<span>5</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/synology/">synology<span>1</span></a></li>
		
			<li><a href="/tags/scrapy/">scrapy<span>1</span></a></li>
		
			<li><a href="/tags/RegExp/">RegExp<span>2</span></a></li>
		
			<li><a href="/tags/Grammar/">Grammar<span>11</span></a></li>
		
			<li><a href="/tags/Webpack/">Webpack<span>2</span></a></li>
		
			<li><a href="/tags/Jasmine/">Jasmine<span>1</span></a></li>
		
			<li><a href="/tags/Performence/">Performence<span>1</span></a></li>
		
			<li><a href="/tags/django/">django<span>1</span></a></li>
		
			<li><a href="/tags/gradle/">gradle<span>1</span></a></li>
		
			<li><a href="/tags/Promise/">Promise<span>2</span></a></li>
		
			<li><a href="/tags/Document/">Document<span>8</span></a></li>
		
			<li><a href="/tags/MySQL/">MySQL<span>1</span></a></li>
		
			<li><a href="/tags/JSP/">JSP<span>1</span></a></li>
		
			<li><a href="/tags/docker/">docker<span>1</span></a></li>
		
			<li><a href="/tags/Chrome/">Chrome<span>2</span></a></li>
		
			<li><a href="/tags/sqlite/">sqlite<span>3</span></a></li>
		
			<li><a href="/tags/Android/">Android<span>3</span></a></li>
		
			<li><a href="/tags/Mocha/">Mocha<span>1</span></a></li>
		
			<li><a href="/tags/StdLib/">StdLib<span>11</span></a></li>
		
			<li><a href="/tags/Library/">Library<span>7</span></a></li>
		
		
		   <li><a href="/tags">...<span>28</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2020/11/30/2020-11-30-android-gradle/" ><i class="fa fa-file-o"></i>Gradle</a>
      </li>
    
      <li>
        <a href="/2020/11/29/2020-11-29-scrapy/" ><i class="fa fa-file-o"></i>Scrapy</a>
      </li>
    
      <li>
        <a href="/2020/11/26/2020-11-26-database-sqlite-exercise/" ><i class="fa fa-file-o"></i>SQLite Exercises</a>
      </li>
    
      <li>
        <a href="/2020/11/25/2020-11-25-database-sqlite-optimization/" ><i class="fa fa-file-o"></i>SQLite 性能优化</a>
      </li>
    
      <li>
        <a href="/2020/11/21/2020-11-21-database-sqlite/" ><i class="fa fa-file-o"></i>SQLite</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/wzpan/freemind/" title="Freemind's Github repository." target="_blank"]);">Freemind</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/JesseQiu" title="My Github account." target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-linkedin"></i><a href="https://jesseqiu.github.io/" title="My Linkin account." target="_blank"]);">My LinkedIn</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->


	</div>
  </div>

  <div class="container-narrow">
  <footer> 
<!-- 不蒜子统计 -->

    <span id="busuanzi_container_site_pv">
            本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
    </span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv" style='display:none'>
            本站访客数 <span id="busuanzi_value_site_uv"> </span>人
    </span>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<span>
  &copy; 2020 JesseChiu
  
</span>

<span>
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/" target="_blank" rel="noopener">Freemind</a>.    
</span>
 </footer>
</div> <!-- container-narrow -->

  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

  
</body>

   </html>
