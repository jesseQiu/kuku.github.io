<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 2 - Cease to struggle and you cease to live</title>
  <meta name="author" content="JesseChiu">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Cease to struggle and you cease to live"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Cease to struggle and you cease to live" type="application/atom+xml">
  
  
    <link href="/favicon.ico" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/spacelab.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <!-- analytics -->
  



</head>


 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Cease to struggle and you cease to live</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="">
			  <i class="fa fa-rss"></i>Rss
			</a>
		  </li>
		  
		  <li>
			<a href="/sitemap.xml" title="">
			  <i class="fa fa-sitemap"></i>Sitemap
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">Cease to struggle and you cease to live</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      Keep on going never give up.
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-09-17 </div>
			<div class="article-title"><a href="/2019/09/17/2019-09--17.golang/" >Golang</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><img src="https://baike.baidu.com/pic/go/953521/0/3b87e950352ac65c5eb643ddf9f2b21192138ae8?fr=lemma&ct=single" alt=""></p>
<blockquote>
<p>Go（又称Golang）是Google开发的一种静态强类型、编译型、并发型，并具有垃圾回收功能的编程语言。<br>罗伯特·格瑞史莫（Robert Griesemer），罗勃·派克（Rob Pike）及肯·汤普逊（Ken Thompson）于2007年9月开始设计Go，稍后Ian Lance Taylor、Russ Cox加入项目。Go是基于Inferno操作系统所开发的。Go于2009年11月正式宣布推出，成为开放源代码项目，并在Linux及Mac OS X平台上进行了实现，后来追加了Windows系统下的实现。在2016年，Go被软件评价公司TIOBE 选为“TIOBE 2016 年最佳语言”。 目前，Go每半年发布一个二级版本（即从a.x升级到a.y）</p>
</blockquote>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://golang.org" target="_blank" rel="noopener">官网</a></li>
<li><a href="https://www.imooc.com/learn/968" target="_blank" rel="noopener">go 语言语法入门</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2019-03-25 </div>
			<div class="article-title"><a href="/2019/03/25/2019-03--25.gantt.project.start/" >Gantt Project Start</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<blockquote>
<p>GanttProject 是以 JAVA 编写的开源软件。可让你轻松绘出甘特图，可输出 PNG/JPG 图片格式、HTML 网页，或是 PDF 档案格式。你能输入项目的可用资源、里程碑、任务/子任务，以及任务的起始日期、持续时间、相依性、进度、备注等等，并且在甘特图上显示出来。</p>
</blockquote>
<h2 id="文章介绍"><a href="#文章介绍" class="headerlink" title="文章介绍"></a>文章介绍</h2><ul>
<li><a href="https://www.mifengtd.cn/articles/creat-a-gantt-chart-with-ganttproject.html" target="_blank" rel="noopener">甘特图绘制软件GanttProject</a></li>
</ul>
<h2 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h2><ul>
<li><a href="https://www.youtube.com/watch?v=MEIYzfDGHCw" target="_blank" rel="noopener">GanttProject操作方法教學影片 (Part 1)</a></li>
<li><a href="https://www.youtube.com/watch?v=p7Rhbknsf2g" target="_blank" rel="noopener">GanttProject操作方法教學影片 (Part 2)</a></li>
</ul>
<h2 id="常用布局"><a href="#常用布局" class="headerlink" title="常用布局"></a>常用布局</h2><ul>
<li>左边栏: 名称-产出-期间-开始时间-结束时间-资源</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://www.ganttproject.biz/" target="_blank" rel="noopener">官网</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-12-03 </div>
			<div class="article-title"><a href="/2018/12/03/2018-12-03-mermaid/" >Mermaid</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>Mermaid 是一个轻量级的图标生成工具(基于 nodejs)，只要通过简单的配置既可以生成漂亮的不同格式文件(svg、png、pdf)</p>
<blockquote>
<p>Generation of diagrams and flowcharts from text in a similar manner as markdown.<br>Ever wanted to simplify documentation and avoid heavy tools like Visio when explaining your code?<br>This is why mermaid was born, a simple markdown-like script language for generating charts from text via javascript.</p>
</blockquote>
<h2 id="一、效果图"><a href="#一、效果图" class="headerlink" title="一、效果图"></a>一、效果图</h2><h3 id="Flowchart"><a href="#Flowchart" class="headerlink" title="Flowchart"></a>Flowchart</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">graph TD;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    A--&gt;B;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    A--&gt;C;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    B--&gt;D;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    C--&gt;D;</span></pre></td></tr></table></figure>

<p><a href="https://github.com/knsv/mermaid/blob/master/img/flow.png" target="_blank" rel="noopener"><img src="https://github.com/knsv/mermaid/raw/master/img/flow.png" alt="Flowchart"></a></p>
<h3 id="Sequence-diagram"><a href="#Sequence-diagram" class="headerlink" title="Sequence diagram"></a>Sequence diagram</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    participant Alice</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    participant Bob</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    Alice-&gt;&gt;John: Hello John, how are you?</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    loop Healthcheck</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        John-&gt;&gt;John: Fight against hypochondria</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    end</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    Note right of John: Rational thoughts &lt;br&#x2F;&gt;prevail...</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    John--&gt;&gt;Alice: Great!</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    John-&gt;&gt;Bob: How about you?</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    Bob--&gt;&gt;John: Jolly good!</span></pre></td></tr></table></figure>

<p><a href="https://github.com/knsv/mermaid/blob/master/img/sequence.png" target="_blank" rel="noopener"><img src="https://github.com/knsv/mermaid/raw/master/img/sequence.png" alt="Sequence diagram"></a></p>
<h3 id="Gantt-diagram"><a href="#Gantt-diagram" class="headerlink" title="Gantt diagram"></a>Gantt diagram</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">gantt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">dateFormat  YYYY-MM-DD</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">title Adding GANTT diagram to mermaid</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">section A section</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">Completed task            :done,    des1, 2014-01-06,2014-01-08</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">Active task               :active,  des2, 2014-01-09, 3d</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">Future task               :         des3, after des2, 5d</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">Future task2               :         des4, after des3, 5d</span></pre></td></tr></table></figure>

<p><a href="https://github.com/knsv/mermaid/blob/master/img/gantt.png" target="_blank" rel="noopener"><img src="https://github.com/knsv/mermaid/raw/master/img/gantt.png" alt="Gantt diagram"></a></p>
<h3 id="Class-diagram-experimental"><a href="#Class-diagram-experimental" class="headerlink" title="Class diagram - experimental"></a>Class diagram - experimental</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">classDiagram</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Class01 &lt;|-- AveryLongClass : Cool</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Class03 *-- Class04</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Class05 o-- Class06</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">Class07 .. Class08</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">Class09 --&gt; C2 : Where am i?</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">Class09 --* C3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">Class09 --|&gt; Class07</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">Class07 : equals()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">Class07 : Object[] elementData</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">Class01 : size()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">Class01 : int chimp</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">Class01 : int gorilla</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">Class08 &lt;--&gt; C2: Cool label</span></pre></td></tr></table></figure>

<p><a href="https://github.com/knsv/mermaid/blob/master/img/class.png" target="_blank" rel="noopener"><img src="https://github.com/knsv/mermaid/raw/master/img/class.png" alt="Class diagram"></a></p>
<h3 id="Git-graph-experimental"><a href="#Git-graph-experimental" class="headerlink" title="Git graph - experimental"></a>Git graph - experimental</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">gitGraph:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">options</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    &quot;nodeSpacing&quot;: 150,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &quot;nodeRadius&quot;: 10</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">end</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">commit</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">branch newbranch</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">checkout newbranch</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">commit</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">commit</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">checkout master</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">commit</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">commit</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">merge newbranch</span></pre></td></tr></table></figure>

<p><a href="https://github.com/knsv/mermaid/blob/master/img/git.png" target="_blank" rel="noopener"><img src="https://github.com/knsv/mermaid/raw/master/img/git.png" alt="Git graph"></a></p>
<h2 id="二、使用技巧"><a href="#二、使用技巧" class="headerlink" title="二、使用技巧"></a>二、使用技巧</h2><h3 id="Mermaid-cli"><a href="#Mermaid-cli" class="headerlink" title="Mermaid.cli"></a>Mermaid.cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -o output.svg</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -o output.png</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -o output.pdf</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -o output.svg -w 1024 -H 768</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -t forest</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -o output.png -b <span class="string">'#FFF000'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">mmdc -i input.mmd -o output.png -b transparent</span></pre></td></tr></table></figure>
<h3 id="Gantt"><a href="#Gantt" class="headerlink" title="Gantt"></a>Gantt</h3><p>在生成甘特图时如果时间比较紧密，使用 <code>mermaid.cli</code> 命令行生成的 pdf 文件时，时间会挤在一起。这时可以使用 <a href="https://github.com/mermaidjs/mermaid-live-editor" target="_blank" rel="noopener">mermaid 在线编辑器</a> 在线显示，再通过浏览器保存为 pdf 解决</p>
<h2 id="三、问题解决"><a href="#三、问题解决" class="headerlink" title="三、问题解决"></a>三、问题解决</h2><h3 id="安装-mermaid-cli-问题"><a href="#安装-mermaid-cli-问题" class="headerlink" title="安装 mermaid.cli 问题"></a>安装 mermaid.cli 问题</h3><h4 id="ERROR-Failed-to-download-Chromium-r515411-Set-quot-PUPPETEER-SKIP-CHROMIUM-DOWNLOA"><a href="#ERROR-Failed-to-download-Chromium-r515411-Set-quot-PUPPETEER-SKIP-CHROMIUM-DOWNLOA" class="headerlink" title="ERROR: Failed to download Chromium r515411! Set &quot;PUPPETEER_SKIP_CHROMIUM_DOWNLOA"></a><code>ERROR: Failed to download Chromium r515411! Set &quot;PUPPETEER_SKIP_CHROMIUM_DOWNLOA</code></h4><p>可以通过设置环境变量 <code>$env:PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=1</code></p>
<h4 id="全局安装失败问题"><a href="#全局安装失败问题" class="headerlink" title="全局安装失败问题"></a>全局安装失败问题</h4><p>这个问题在 <code>mermaind.cli</code> git 主页中有提到，建议使用本地安装解决。<br>这边有个办法可以安装为全局：</p>
<ul>
<li>进入 node 插件全局安装目录 <code>C:\Users\xxxx\AppData\Roaming\npm</code></li>
<li><code>npm i mermaid.cli</code></li>
</ul>
<h2 id="四、补充"><a href="#四、补充" class="headerlink" title="四、补充"></a>四、补充</h2><p>目前 Sublime 还不支持 Mermaid 插件，不过 <a href="https://typora.io/#windows" target="_blank" rel="noopener">typora</a> 已经得到了支持，如果习惯该编辑器的可以尝试下</p>
<h3 id="Gantt-1"><a href="#Gantt-1" class="headerlink" title="Gantt"></a>Gantt</h3><ul>
<li>无法按百分比显示当前项目进度</li>
<li>没有里程碑标记</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://github.com/knsv/mermaid#readme" target="_blank" rel="noopener">mermaid git</a></li>
<li><a href="https://github.com/mermaidjs/mermaid.cli" target="_blank" rel="noopener">mermaid cli</a></li>
<li><a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">mermaid 电子文档</a></li>
<li><a href="https://github.com/mermaidjs/mermaid-live-editor" target="_blank" rel="noopener">mermaid 在线编辑器</a></li>
<li><a href="https://typora.io/#windows" target="_blank" rel="noopener">typora</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-12-03 </div>
			<div class="article-title"><a href="/2018/12/03/2019-01-22.powershell.skill/" >Powershell Skill</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h3 id="获取当前目录下指定文件，递归"><a href="#获取当前目录下指定文件，递归" class="headerlink" title="获取当前目录下指定文件，递归"></a>获取当前目录下指定文件，递归</h3><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-ChildItem</span> *.c -Recurse | <span class="built_in">ForEach-Object</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$file</span> = <span class="variable">$_</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$content</span> = <span class="built_in">Get-Content</span> -LiteralPath <span class="variable">$file</span> -Raw</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="JSON-相关操作"><a href="#JSON-相关操作" class="headerlink" title="JSON 相关操作"></a>JSON 相关操作</h3><h4 id="1-读写取-json-文件"><a href="#1-读写取-json-文件" class="headerlink" title="1. 读写取 json 文件"></a>1. 读写取 json 文件</h4><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">// 读取</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$numberToEnglish</span> = <span class="built_in">Get-Content</span> -Raw ./i18n/e8_sui_last_time.json -Encoding UTF8 | <span class="built_in">ConvertFrom-Json</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">// 写入</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$formalKeyToEnglish</span> | <span class="built_in">ConvertTo-Json</span> | <span class="built_in">Out-File</span> .\i18n\en.json -Encoding utf8</span></pre></td></tr></table></figure>

<h4 id="2-使用-JSON-创建对象"><a href="#2-使用-JSON-创建对象" class="headerlink" title="2. 使用 JSON 创建对象"></a>2. 使用 JSON 创建对象</h4><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$json</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "ServerName": "<span class="variable">$env:ComputerName</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "UserName": "<span class="variable">$env:UserName</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "BIOS": &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="string">         "Manufacturer" : "$((Get-WmiObject -Class Win32_BIOS).Manufacturer)",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="string">         "Version" : "$((Get-WmiObject -Class Win32_BIOS).Version)",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="string">         "Serial" : "$((Get-WmiObject -Class Win32_BIOS).SerialNumber)"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="string">         &#125;,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "OS" : "$([Environment]::OSVersion.VersionString)"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="string"> &#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">// json -&gt; obj</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$jsonObj</span> = <span class="built_in">ConvertFrom-Json</span> -InputObject <span class="variable">$json</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">// 可以使用对象方法读写属性</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$jsonObj</span>.ServerName</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$jsonObj</span>.BIOS.Version</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$jsonObj</span>.OS</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">// json obj -&gt; json string</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$jsonString</span> = <span class="built_in">ConvertTo-Json</span> -InputObject <span class="variable">$templateObj</span></span></pre></td></tr></table></figure>
<ul>
<li><a href="http://www.pstips.net/use-json-to-create-objects.html" target="_blank" rel="noopener">Powershell 使用 JSON 创建对象</a></li>
</ul>
<h3 id="XML-相关操作"><a href="#XML-相关操作" class="headerlink" title="XML 相关操作"></a>XML 相关操作</h3><h4 id="1-基础操作"><a href="#1-基础操作" class="headerlink" title="1. 基础操作"></a>1. 基础操作</h4><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$xml</span> = <span class="string">@'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;?xml version="1.0" standalone="yes"?&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;staff branch="Hanover" Type="sales"&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;employee&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Name&gt;Tobias Weltner&lt;/Name&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;function&gt;management&lt;/function&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;age&gt;39&lt;/age&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;/employee&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;employee&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Name&gt;Cofi Heidecke&lt;/Name&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;function&gt;security&lt;/function&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;age&gt;4&lt;/age&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;/employee&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;/staff&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="string">'@</span> | <span class="built_in">Out-File</span> employee.xml</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">// xml string -&gt; xml 结构</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$xmldata</span> = [xml]<span class="variable">$xml</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">// 读取 xml 文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$xmldata</span> = [xml](<span class="built_in">Get-Content</span> employee.xml)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">// 保存文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$xmldata</span>.Save(“<span class="variable">$env:temp</span>\updateddata.xml”)</span></pre></td></tr></table></figure>

<h4 id="2-代码示例"><a href="#2-代码示例" class="headerlink" title="2. 代码示例"></a>2. 代码示例</h4><ul>
<li><p>xml 文件</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">&lt;template xmlns=<span class="string">"http://www.ingenico.com/ingestate/paramTemplate"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    id=<span class="string">"xxx"</span> name=<span class="string">"xxx"</span> description=<span class="string">"xxx Parameters"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    version=<span class="string">"00002"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&lt;fields&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- TERMINAL CONFIGURATION --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"MinimumAmount"</span> name=<span class="string">"Minimum Amount"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">            access=<span class="string">"READWRITE"</span> type=<span class="string">"numeric"</span> minLength=<span class="string">"1"</span> maxLength=<span class="string">"12"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"ReceiptHeaderLine1"</span> name=<span class="string">"Header Line 1"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"27"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"ReceiptHeaderLine2"</span> name=<span class="string">"Header Line 2"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"27"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"ReceiptHeaderLine3"</span> name=<span class="string">"Header Line 3"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"27"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"ReceiptHeaderLine4"</span> name=<span class="string">"Header Line 4"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"27"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"ReceiptHeaderLine5"</span> name=<span class="string">"Header Line 5"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"27"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- choiceField id=<span class="string">"VoidPasswordLevel"</span> name=<span class="string">"Void Password Level"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"2"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Manager"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Supervisor"</span> value=<span class="string">"2"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Access Freely"</span> value=<span class="string">"3"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"SettlementPasswordLevel"</span> name=<span class="string">"Settlement Password Level"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"2"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Manager"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Supervisor"</span> value=<span class="string">"2"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Access Freely"</span> value=<span class="string">"3"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt; --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"SaleEnabled"</span> name=<span class="string">"Sale"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled &amp;amp; Hide"</span> value=<span class="string">"2"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"VoidEnabled"</span> name=<span class="string">"Void"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled &amp;amp; Hide"</span> value=<span class="string">"2"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"InstalmentSaleEnabled"</span> name=<span class="string">"Instalment Sale"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;      </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"PreAuthEnabled"</span> name=<span class="string">"PreAuth"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">56</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">57</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- &lt;choiceField id=<span class="string">"PreAuthCompletionOnlineEnabled"</span> name=<span class="string">"PreAuth-Comp Online"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">58</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">59</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">60</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">61</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">62</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"PreAuthCompletionOfflineEnabled"</span> name=<span class="string">"PreAuth-Comp Offline"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">63</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">64</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">65</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">66</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt; --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">67</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"OfflineSaleEnabled"</span> name=<span class="string">"Offline Sale"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">68</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">69</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">70</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">71</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">72</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"UPIPreAuthEnabled"</span> name=<span class="string">"UPI PreAuth"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">73</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">74</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">75</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">76</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">77</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"RefundEnabled"</span> name=<span class="string">"Refund"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">78</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">79</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">80</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">81</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">82</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"TxCashAdvanceEnabled"</span> name=<span class="string">"Cash Advance"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">83</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">84</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">85</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">86</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">87</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"TxSaleWithCashEnabled"</span> name=<span class="string">"Sale + Cash"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">88</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">89</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">90</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">91</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">92</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"DebitPriority"</span> name=<span class="string">"MyDebit/Scheme Priority"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">93</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">94</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Opt-In"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">95</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Opt-Out"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">96</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">97</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- &lt;choiceField id=<span class="string">"VoidPreAuthEnabled"</span> name=<span class="string">"Void PreAuth"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">98</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">99</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">100</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">101</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt; --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">102</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"SaleContactlessEnabled"</span> name=<span class="string">"Contactless Sale"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">103</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">104</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">105</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">106</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">107</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">108</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- EMV Tags --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">109</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"TermCapability"</span> name=<span class="string">"Terminal Capability"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">110</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"6"</span> maxLength=<span class="string">"6"</span> defaultValue=<span class="string">"E0F0C8"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">111</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"AdditionTermCapability"</span> name=<span class="string">"Additional Terminal Capability"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">112</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"10"</span> maxLength=<span class="string">"10"</span> defaultValue=<span class="string">"F000F0A001"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">113</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"TermType"</span> name=<span class="string">"Terminal Type"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">114</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"2"</span> maxLength=<span class="string">"2"</span> defaultValue=<span class="string">"22"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">115</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"TermCountryCode"</span> name=<span class="string">"Terminal Country Code"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">116</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"numeric"</span> minLength=<span class="string">"3"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">"458"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">117</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"TerminalBaseCurrencyCode"</span> name=<span class="string">"Terminal Base Currency Code"</span> access=<span class="string">"READWRITE"</span> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">118</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"numeric"</span> minLength=<span class="string">"3"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">"458"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">119</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">120</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">121</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- QR Settings --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">122</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QROptInOption"</span> name=<span class="string">"QR OptIn Option"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">123</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"1"</span> defaultValue=<span class="string">"Y"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">124</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRPaymentURL"</span> name=<span class="string">"QR Payment URL"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">125</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"99"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">126</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRPaymentInqURL"</span> name=<span class="string">"QR Payment Inq URL"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">127</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"99"</span> defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">128</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRCancelOrderURL"</span> name=<span class="string">"QR Cancel Order URL"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">129</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"99"</span> defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">130</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRWalletIDURL"</span> name=<span class="string">"QR Wallet ID URL"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">131</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"99"</span> defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">132</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRRegisterURL"</span> name=<span class="string">"QR Register URL"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">133</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"99"</span> defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">134</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRLogonURL"</span> name=<span class="string">"QR Logon URL"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">135</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"99"</span> defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">136</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"QRMasterKey"</span> name=<span class="string">"QR Master Key"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">137</span></pre></td><td class="code"><pre><span class="line">            type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"64"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">138</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"TXQRSaleEnabled"</span> name=<span class="string">"QR Sale flag"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">139</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"0"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">140</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">141</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">142</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">143</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">144</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- Terminal ID TABLE --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">145</span></pre></td><td class="code"><pre><span class="line">        &lt;structureField id=<span class="string">"TerminalIds"</span> name=<span class="string">"TerminalIds"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">146</span></pre></td><td class="code"><pre><span class="line">            minRows=<span class="string">"0"</span> maxRows=<span class="string">"300"</span> uniqueKeys=<span class="string">"TidIndex"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">147</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">148</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"TidIndex"</span> name=<span class="string">"Index"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">149</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"numeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">150</span></pre></td><td class="code"><pre><span class="line">                </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">151</span></pre></td><td class="code"><pre><span class="line">            &lt;dynamicChoiceField id=<span class="string">"TidHostIndex"</span> name=<span class="string">"Host Index"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">152</span></pre></td><td class="code"><pre><span class="line">                refFieldId=<span class="string">"Hosts"</span> refLabel=<span class="string">"HostName"</span> refValue=<span class="string">"HostIndex"</span>/&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">153</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">154</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"TerminalId"</span> name=<span class="string">"Terminal ID"</span> access=<span class="string">"READWRITE"</span> type=<span class="string">"alphanumeric"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">155</span></pre></td><td class="code"><pre><span class="line">                minLength=<span class="string">"1"</span> maxLength=<span class="string">"8"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">156</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"MerchantId"</span> name=<span class="string">"Merchant ID"</span> access=<span class="string">"READWRITE"</span> type=<span class="string">"alphanumeric"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">157</span></pre></td><td class="code"><pre><span class="line">                minLength=<span class="string">"1"</span> maxLength=<span class="string">"15"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">158</span></pre></td><td class="code"><pre><span class="line">            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">159</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceField id=<span class="string">"AcquirerEnabled"</span> name=<span class="string">"Acquirer Enable"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">160</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">161</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">162</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">163</span></pre></td><td class="code"><pre><span class="line">            &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">164</span></pre></td><td class="code"><pre><span class="line">        &lt;/structureField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">165</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">166</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- INSTALMENT TABLE --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">167</span></pre></td><td class="code"><pre><span class="line">        &lt;structureField id=<span class="string">"Instalments"</span> name=<span class="string">"Instalments"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">168</span></pre></td><td class="code"><pre><span class="line">            minRows=<span class="string">"0"</span> maxRows=<span class="string">"300"</span> uniqueKeys=<span class="string">"InstalmentIndex"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">169</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">170</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"InstalmentIndex"</span> name=<span class="string">"Index"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">171</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"numeric"</span> minLength=<span class="string">"1"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">172</span></pre></td><td class="code"><pre><span class="line">                            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">173</span></pre></td><td class="code"><pre><span class="line">            &lt;dynamicChoiceField id=<span class="string">"InstalmentHostIndex"</span> name=<span class="string">"Host"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">174</span></pre></td><td class="code"><pre><span class="line">                refFieldId=<span class="string">"Hosts"</span> refLabel=<span class="string">"HostName"</span> refValue=<span class="string">"HostIndex"</span>/&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">175</span></pre></td><td class="code"><pre><span class="line">                </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">176</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"InstalmentDescription"</span> name=<span class="string">"Description"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">177</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"20"</span> defaultValue=<span class="string">"EZP 0 MONTHS"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">178</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">179</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"InstallmentID"</span> name=<span class="string">"Installment ID"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">180</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"numeric"</span> minLength=<span class="string">"1"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">181</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">182</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"InstalmentPeriod"</span> name=<span class="string">"Instalment Period (Months)"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">183</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"numeric"</span> minLength=<span class="string">"1"</span> maxLength=<span class="string">"2"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">184</span></pre></td><td class="code"><pre><span class="line">                    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">185</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"InstalmentMinAmount"</span> name=<span class="string">"Instalment Minimum Amount (cents)"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">186</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"numeric"</span> minLength=<span class="string">"1"</span> maxLength=<span class="string">"12"</span> defaultValue=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">187</span></pre></td><td class="code"><pre><span class="line">            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">188</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceField id=<span class="string">"TenureEnabled"</span> name=<span class="string">"Tenure enabled"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">189</span></pre></td><td class="code"><pre><span class="line">                defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">190</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">191</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">192</span></pre></td><td class="code"><pre><span class="line">            &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">193</span></pre></td><td class="code"><pre><span class="line">        &lt;/structureField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">194</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">195</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- AMEX CONFIGURATION --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">196</span></pre></td><td class="code"><pre><span class="line">        &lt;!--</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">197</span></pre></td><td class="code"><pre><span class="line">        &lt;choiceField id=<span class="string">"AmexHttpsHeaderEnabled"</span> name=<span class="string">"Amex HTTPS Header"</span> type=<span class="string">"SINGLE"</span> defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">198</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">199</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">200</span></pre></td><td class="code"><pre><span class="line">        &lt;/choiceField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">201</span></pre></td><td class="code"><pre><span class="line">            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">202</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"AmexOrigin"</span> name=<span class="string">"Amex Origin"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">203</span></pre></td><td class="code"><pre><span class="line">            access=<span class="string">"READWRITE"</span> type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"1"</span> maxLength=<span class="string">"999"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">204</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">205</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"AmexCountryCode"</span> name=<span class="string">"Amex Country Code"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">206</span></pre></td><td class="code"><pre><span class="line">            access=<span class="string">"READWRITE"</span> type=<span class="string">"numeric"</span> minLength=<span class="string">"3"</span> maxLength=<span class="string">"3"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">207</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"458"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">208</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"AmexRegion"</span> name=<span class="string">"Amex Region"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">209</span></pre></td><td class="code"><pre><span class="line">            access=<span class="string">"READWRITE"</span> type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"10"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">210</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"JAPA"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">211</span></pre></td><td class="code"><pre><span class="line">        &lt;dataField id=<span class="string">"AmexRoutingIndicator"</span> name=<span class="string">"Amex Routing Indicator"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">212</span></pre></td><td class="code"><pre><span class="line">            access=<span class="string">"READWRITE"</span> type=<span class="string">"numeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"10"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">213</span></pre></td><td class="code"><pre><span class="line">            defaultValue=<span class="string">"050"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">214</span></pre></td><td class="code"><pre><span class="line">        --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">215</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">216</span></pre></td><td class="code"><pre><span class="line">        &lt;!-- EFTSEC TABLE --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">217</span></pre></td><td class="code"><pre><span class="line">        &lt;structureField id=<span class="string">"eftsecConfig"</span> name=<span class="string">"EFTSEC Config"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">218</span></pre></td><td class="code"><pre><span class="line">            minRows=<span class="string">"0"</span> maxRows=<span class="string">"300"</span> uniqueKeys=<span class="string">"eftsecIndex"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">219</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">220</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecIndex"</span> name=<span class="string">"Index"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">221</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"numeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">222</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecHostName"</span> name=<span class="string">"EFTSEC Host Name"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">223</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"20"</span> defaultValue=<span class="string">"MBB"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">224</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecComHostName"</span> name=<span class="string">"Comms Host Name"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">225</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"20"</span> defaultValue=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">226</span></pre></td><td class="code"><pre><span class="line">            &lt;choiceField id=<span class="string">"eftsecLEEnable"</span> name=<span class="string">"LE Enabled"</span> type=<span class="string">"SINGLE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">227</span></pre></td><td class="code"><pre><span class="line">                defaultValue=<span class="string">"1"</span> access=<span class="string">"READWRITE"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">228</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Disabled"</span> value=<span class="string">"0"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">229</span></pre></td><td class="code"><pre><span class="line">                &lt;choiceValue label=<span class="string">"Enabled"</span> value=<span class="string">"1"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">230</span></pre></td><td class="code"><pre><span class="line">            &lt;/choiceField&gt;  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">231</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecRKSVendorID"</span> name=<span class="string">"Vendor ID"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">232</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"8"</span> defaultValue=<span class="string">"00000002"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">233</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecRKSAcquirerID"</span> name=<span class="string">"Acquirer ID"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">234</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"3"</span> defaultValue=<span class="string">"001"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">235</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecRKSLTID"</span> name=<span class="string">"LTID"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">236</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"8"</span> defaultValue=<span class="string">"10000002"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">237</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecRKSEncryptionMethod"</span> name=<span class="string">"Encryption Method"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">238</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"4"</span> defaultValue=<span class="string">"2221"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">239</span></pre></td><td class="code"><pre><span class="line">            &lt;dataField id=<span class="string">"eftsecRKSTPDU"</span> name=<span class="string">"TPDU"</span> access=<span class="string">"READWRITE"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">240</span></pre></td><td class="code"><pre><span class="line">                type=<span class="string">"alphanumeric"</span> minLength=<span class="string">"0"</span> maxLength=<span class="string">"10"</span> defaultValue=<span class="string">"6003550000"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">241</span></pre></td><td class="code"><pre><span class="line">        &lt;/structureField&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">242</span></pre></td><td class="code"><pre><span class="line">    &lt;/fields&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">243</span></pre></td><td class="code"><pre><span class="line">&lt;output&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">244</span></pre></td><td class="code"><pre><span class="line">        &lt;customParamFile</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">245</span></pre></td><td class="code"><pre><span class="line">            customClass=<span class="string">"com.ingenico.apac.ingestate.custom.RegistryParameterFileOutput"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">246</span></pre></td><td class="code"><pre><span class="line">            &lt;settings fileType=<span class="string">"sqlite"</span> fileName=<span class="string">"mbbconf.db"</span> rootKey=<span class="string">""</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">247</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">248</span></pre></td><td class="code"><pre><span class="line">            &lt;!-- TERMINAL ID --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">249</span></pre></td><td class="code"><pre><span class="line">            &lt;structureOutput fieldId=<span class="string">"TerminalIds"</span> key=<span class="string">"TerminalIdTable"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">250</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"TidIndex"</span> key=<span class="string">"Index"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">251</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"TidHostIndex"</span> key=<span class="string">"HostIndex"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">252</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"TerminalId"</span> key=<span class="string">"TerminalId"</span> type=<span class="string">"STRING"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">253</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"MerchantId"</span> key=<span class="string">"MerchantId"</span> type=<span class="string">"STRING"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">254</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"AcquirerEnabled"</span> key=<span class="string">"AcquirerEnabled"</span> type=<span class="string">"BOOLEAN"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">255</span></pre></td><td class="code"><pre><span class="line">            &lt;/structureOutput&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">256</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">257</span></pre></td><td class="code"><pre><span class="line">            ...</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">258</span></pre></td><td class="code"><pre><span class="line">            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">259</span></pre></td><td class="code"><pre><span class="line">            &lt;!-- INSTALMENTS --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">260</span></pre></td><td class="code"><pre><span class="line">            &lt;structureOutput fieldId=<span class="string">"Instalments"</span> key=<span class="string">"InstalmentTable"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">261</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"InstalmentIndex"</span> key=<span class="string">"InstalmentIndex"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">262</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"InstalmentHostIndex"</span> key=<span class="string">"InstalmentHostIndex"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">263</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"InstalmentDescription"</span> key=<span class="string">"InstalmentDescription"</span> type=<span class="string">"STRING"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">264</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"InstallmentID"</span> key=<span class="string">"InstallmentID"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">265</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"InstalmentPeriod"</span> key=<span class="string">"InstalmentPeriod"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">266</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"InstalmentMinAmount"</span> key=<span class="string">"InstalmentMinAmount"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">267</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"TenureEnabled"</span> key=<span class="string">"TenureEnabled"</span> type=<span class="string">"BOOLEAN"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">268</span></pre></td><td class="code"><pre><span class="line">            &lt;/structureOutput&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">269</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">270</span></pre></td><td class="code"><pre><span class="line">            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">271</span></pre></td><td class="code"><pre><span class="line">            &lt;!-- EFTSEC TABLE --&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">272</span></pre></td><td class="code"><pre><span class="line">            &lt;structureOutput fieldId=<span class="string">"eftsecConfig"</span> key=<span class="string">"EFTSECTable"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">273</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"eftsecIndex"</span> key=<span class="string">"Index"</span> type=<span class="string">"UINT"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">274</span></pre></td><td class="code"><pre><span class="line">                &lt;fieldOutput fieldId=<span class="string">"eftsecHostName"</span> key=<span class="string">"eftsecHostName"</span> type=<span class="string">"STRING"</span> /&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">275</span></pre></td><td class="code"><pre><span class="line">            &lt;/structureOutput&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">276</span></pre></td><td class="code"><pre><span class="line">        &lt;/customParamFile&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">277</span></pre></td><td class="code"><pre><span class="line">    &lt;/output&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">278</span></pre></td><td class="code"><pre><span class="line">&lt;/template&gt;</span></pre></td></tr></table></figure></li>
<li><p>解析代码</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 template 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getTemplate(<span class="variable">$version</span>,<span class="variable">$nodes</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$template</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="string">  "templateName": "xxx.Config.Parameters",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="string">  "templateVersion": "<span class="variable">$version</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="string">  "output": &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "type": "xml",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "fileName": "xxx.config.xml",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "keyNameLevel0": "node",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "keyNameLevel1": "node",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "keyNameLevel2": "node",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "attrNameLevel0": "tag",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "attrNameLevel1": "tag",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "attrNameLevel2": "tag"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="string">  &#125;,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="string">   "nodes":[<span class="variable">$nodes</span>]</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="string">  &#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$template</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 tab 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getTabString(<span class="variable">$key</span>,<span class="variable">$name</span>,<span class="variable">$fields</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$tab</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "key": "<span class="variable">$key</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "name": "<span class="variable">$name</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "layoutType": "tab",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "fields":[<span class="variable">$fields</span>]</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$tab</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 datagrid 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getDatagrid(<span class="variable">$key</span>,<span class="variable">$name</span>,<span class="variable">$fields</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$datagrid</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "key": "<span class="variable">$key</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "name": "<span class="variable">$name</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "layoutType": "datagrid",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "fields": [<span class="variable">$fields</span>]</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$datagrid</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 text element 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getTextElement(<span class="variable">$key</span>,<span class="variable">$name</span>,<span class="variable">$defaultValue</span>,<span class="variable">$min</span>,<span class="variable">$max</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$txtElement</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "key": "<span class="variable">$key</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "name": "<span class="variable">$name</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "defValue": "<span class="variable">$defaultValue</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">56</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "layoutType": "text",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">57</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "minLength": <span class="variable">$min</span>,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">58</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "maxLength": <span class="variable">$max</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">59</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">60</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">61</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$txtElement</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">62</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">63</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">64</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 radio 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">65</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getRadioElement(<span class="variable">$key</span>,<span class="variable">$name</span>,<span class="variable">$defaultValue</span>,<span class="variable">$fields</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">66</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$radioElement</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">67</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">68</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "key": "<span class="variable">$key</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">69</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "name": "<span class="variable">$name</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">70</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "defValue": "<span class="variable">$defaultValue</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">71</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "type": "bool",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">72</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "layoutType": "radio",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">73</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "choiceValue": &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">74</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "fields": [<span class="variable">$fields</span>]</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">75</span></pre></td><td class="code"><pre><span class="line"><span class="string">    &#125;,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">76</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "trueValue": "true",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">77</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "falseValue": "false"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">78</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">79</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">80</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$radioElement</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">81</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">82</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">83</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声 dropDown element</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">84</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getDropdownElement(<span class="variable">$key</span>,<span class="variable">$name</span>,<span class="variable">$defaultValue</span>,<span class="variable">$fields</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">85</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$dropdown</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">86</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">87</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "key": "<span class="variable">$key</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">88</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "name": "<span class="variable">$name</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">89</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "defValue": "<span class="variable">$defaultValue</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">90</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "layoutType": "dropdown",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">91</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "choiceValue": &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">92</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "fields": [<span class="variable">$fields</span>]</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">93</span></pre></td><td class="code"><pre><span class="line"><span class="string">  &#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">94</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">95</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">96</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$dropdown</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">97</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">98</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">99</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 fileds element</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">100</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getFildesElement(<span class="variable">$key</span>,<span class="variable">$value</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">101</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$fieldElement</span> = <span class="string">@"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">102</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">103</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "name":"<span class="variable">$key</span>",</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">104</span></pre></td><td class="code"><pre><span class="line"><span class="string">    "value":"<span class="variable">$value</span>"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">105</span></pre></td><td class="code"><pre><span class="line"><span class="string">&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">106</span></pre></td><td class="code"><pre><span class="line"><span class="string">"@</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">107</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable">$fieldElement</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">108</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">109</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">110</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># get value by id</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">111</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getValueById(<span class="variable">$id</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">112</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>(<span class="variable">$id</span> -and <span class="variable">$outputMap</span>.Contains(<span class="variable">$id</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">113</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> <span class="variable">$outputMap</span>[<span class="variable">$id</span>]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">114</span></pre></td><td class="code"><pre><span class="line">    &#125;<span class="keyword">else</span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">115</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> <span class="variable">$id</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">116</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">117</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">118</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">119</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取 structureField json 字符串: 等价于一个 tab</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">120</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getStructureFieldNodeJson(<span class="variable">$structureField</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">121</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">122</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># tab key 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">123</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$tabKey</span> = getValueById <span class="variable">$structureField</span>.id</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">124</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># tab name 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">125</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$tabName</span> = <span class="variable">$structureField</span>.name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">126</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># tab fields 内容</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">127</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$tabFields</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">128</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">129</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 获取 structureField 所有元素，生成 datagrid json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">130</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$childNodes</span> = <span class="variable">$structureField</span>.ChildNodes</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">131</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">132</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 生成 datagrid 元素</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">133</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$datagridKey</span> = getValueById <span class="variable">$structureField</span>.id</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">134</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$datagridName</span> = <span class="variable">$structureField</span>.name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">135</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$datagridBody</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">136</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$datagridFields</span> =<span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">137</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">138</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 遍历所有子节点</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">139</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span> <span class="nomarkup">-lt</span> <span class="variable">$childNodes</span>.Count;<span class="variable">$i</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">140</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">141</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$key</span> = getValueById <span class="variable">$childNodes</span>[<span class="variable">$i</span>].id</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">142</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$name</span> = <span class="variable">$childNodes</span>[<span class="variable">$i</span>].name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">143</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$default</span> = <span class="variable">$childNodes</span>[<span class="variable">$i</span>].defaultValue</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">144</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$field</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">145</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$body</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">146</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">147</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span>(<span class="variable">$childNodes</span>[<span class="variable">$i</span>].LocalName.Equals(<span class="string">"choiceField"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">148</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">149</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">for</span>(<span class="variable">$j</span>=<span class="number">0</span>;<span class="variable">$j</span> <span class="nomarkup">-lt</span> <span class="variable">$childNodes</span>[<span class="variable">$i</span>].ChildNodes.Count;<span class="variable">$j</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">150</span></pre></td><td class="code"><pre><span class="line">                <span class="comment"># 排除掉注释语句</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">151</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">if</span>(!<span class="variable">$childNodes</span>[<span class="variable">$i</span>].ChildNodes[<span class="variable">$j</span>].NodeType.ToString().Equals(<span class="string">"Comment"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">152</span></pre></td><td class="code"><pre><span class="line">                    <span class="comment"># 生成 fields 子元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">153</span></pre></td><td class="code"><pre><span class="line">                    <span class="variable">$field</span> += (getFildesElement <span class="variable">$childNodes</span>[<span class="variable">$i</span>].ChildNodes[<span class="variable">$j</span>].label <span class="variable">$childNodes</span>[<span class="variable">$i</span>].ChildNodes[<span class="variable">$j</span>].value) + <span class="string">","</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">154</span></pre></td><td class="code"><pre><span class="line">                &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">155</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">156</span></pre></td><td class="code"><pre><span class="line">       </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">157</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 生成 dropdown 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">158</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$body</span> = (getDropdownElement <span class="variable">$key</span> <span class="variable">$name</span> <span class="variable">$default</span> <span class="variable">$field</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">159</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">160</span></pre></td><td class="code"><pre><span class="line">        &#125;<span class="keyword">elseif</span>(<span class="variable">$childNodes</span>[<span class="variable">$i</span>].LocalName.Equals(<span class="string">"dataField"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">161</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$min</span> = <span class="variable">$childNodes</span>[<span class="variable">$i</span>].minLength</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">162</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$max</span> = <span class="variable">$childNodes</span>[<span class="variable">$i</span>].maxLength</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">163</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">164</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 生成 txt 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">165</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$body</span> = (getTextElement <span class="variable">$key</span> <span class="variable">$name</span> <span class="variable">$default</span> <span class="variable">$min</span> <span class="variable">$max</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">166</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">167</span></pre></td><td class="code"><pre><span class="line">        &#125;<span class="keyword">elseif</span>(<span class="variable">$childNodes</span>[<span class="variable">$i</span>].LocalName.Equals(<span class="string">"dynamicChoiceField"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">168</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$min</span> = <span class="number">0</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">169</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$max</span> = <span class="number">12</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">170</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">171</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 生成 txt 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">172</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$body</span> = (getTextElement <span class="variable">$key</span> <span class="variable">$name</span> <span class="variable">$default</span> <span class="variable">$min</span> <span class="variable">$max</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">173</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">174</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">175</span></pre></td><td class="code"><pre><span class="line">        <span class="comment"># 排除注释节点</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">176</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span>(!<span class="variable">$body</span>.Equals(<span class="string">""</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">177</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$datagridFields</span> += <span class="variable">$body</span> + <span class="string">","</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">178</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">179</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">180</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">181</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">182</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 合成生成最终的 datagrid json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">183</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$datagridBody</span> = getDatagrid <span class="variable">$datagridKey</span> <span class="variable">$datagridName</span> <span class="variable">$datagridFields</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">184</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">185</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 拼接 tab fields json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">186</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$tabFields</span> += <span class="variable">$datagridBody</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">187</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 生成最终 tab 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">188</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$tabBody</span> = getTabString <span class="variable">$tabKey</span> <span class="variable">$tabName</span> <span class="variable">$tabFields</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">189</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="variable">$tabBody</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">190</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">191</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">192</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">193</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">194</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取 xml 配置文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">195</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$commXmlData</span> = [xml](<span class="built_in">Get-Content</span> mbbconf.xml)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">196</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">197</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">198</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">199</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存储 output id 和 key 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">200</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$outputMap</span> = @&#123;&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">201</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">202</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取 output -&gt; fieldOutput 节点映射 id 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">203</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$fieldOutputXmlData</span> = <span class="variable">$commXmlData</span>.template.output.customParamFile.fieldOutput</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">204</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span> <span class="nomarkup">-lt</span> <span class="variable">$fieldOutputXmlData</span>.Count;<span class="variable">$i</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">205</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">206</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>(<span class="variable">$fieldOutputXmlData</span>[<span class="variable">$i</span>].fieldId -and !<span class="variable">$fieldOutputXmlData</span>[<span class="variable">$i</span>].NodeType.ToString().Equals(<span class="string">"Comment"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">207</span></pre></td><td class="code"><pre><span class="line">        <span class="comment"># 提取 / 第二个元素</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">208</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$outputMap</span>[<span class="variable">$fieldOutputXmlData</span>[<span class="variable">$i</span>].fieldId] = <span class="variable">$fieldOutputXmlData</span>[<span class="variable">$i</span>].key.Split(<span class="string">"/"</span>)[<span class="number">1</span>]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">209</span></pre></td><td class="code"><pre><span class="line">        <span class="built_in">Write-Host</span> <span class="variable">$fieldOutputXmlData</span>[<span class="variable">$i</span>].fieldId : <span class="variable">$outputMap</span>[<span class="variable">$fieldOutputXmlData</span>[<span class="variable">$i</span>].fieldId]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">210</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">211</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">212</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">213</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取 output -&gt; structureOutput 节点映射 id 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">214</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$structureOutputXmlData</span> = <span class="variable">$commXmlData</span>.template.output.customParamFile.structureOutput</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">215</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span> <span class="nomarkup">-lt</span> <span class="variable">$structureOutputXmlData</span>.Count;<span class="variable">$i</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">216</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">217</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>(<span class="variable">$structureOutputXmlData</span>[<span class="variable">$i</span>].fieldId -and !<span class="variable">$structureOutputXmlData</span>[<span class="variable">$i</span>].NodeType.ToString().Equals(<span class="string">"Comment"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">218</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$outputMap</span>[<span class="variable">$structureOutputXmlData</span>[<span class="variable">$i</span>].fieldId] = <span class="variable">$structureOutputXmlData</span>[<span class="variable">$i</span>].key</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">219</span></pre></td><td class="code"><pre><span class="line">        <span class="built_in">Write-Host</span> <span class="string">'*** '</span> <span class="variable">$structureOutputXmlData</span>[<span class="variable">$i</span>].fieldId : <span class="variable">$outputMap</span>[<span class="variable">$structureOutputXmlData</span>[<span class="variable">$i</span>].fieldId]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">220</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">221</span></pre></td><td class="code"><pre><span class="line">        <span class="comment"># structureOutput -&gt; fieldOutput</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">222</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$child</span> = <span class="variable">$structureOutputXmlData</span>.fieldOutput</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">223</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">for</span>(<span class="variable">$j</span>=<span class="number">0</span>;<span class="variable">$j</span> <span class="nomarkup">-lt</span> <span class="variable">$child</span>.Count;<span class="variable">$j</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">224</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span>(<span class="variable">$child</span>[<span class="variable">$j</span>].fieldId -and !<span class="variable">$child</span>[<span class="variable">$j</span>].NodeType.ToString().Equals(<span class="string">"Comment"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">225</span></pre></td><td class="code"><pre><span class="line">                <span class="variable">$outputMap</span>[<span class="variable">$child</span>[<span class="variable">$j</span>].fieldId] = <span class="variable">$child</span>[<span class="variable">$j</span>].key</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">226</span></pre></td><td class="code"><pre><span class="line">                <span class="built_in">Write-Host</span> <span class="variable">$child</span>[<span class="variable">$j</span>].fieldId : <span class="variable">$outputMap</span>[<span class="variable">$child</span>[<span class="variable">$j</span>].fieldId]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">227</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">228</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">229</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">230</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">231</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">232</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">Write-Host</span> <span class="string">"outMap length: "</span> <span class="variable">$outputMap</span>.Count</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">233</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">234</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">235</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">236</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">237</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># template nodes</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">238</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateNodes</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">239</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># template version</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">240</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateVsersion</span> = <span class="variable">$commXmlData</span>.template.version</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">241</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># template key 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">242</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateKey</span> = <span class="variable">$commXmlData</span>.template.id</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">243</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># template name 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">244</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateName</span> = <span class="variable">$commXmlData</span>.template.name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">245</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># template 内容用于生成最终的 json 文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">246</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateBody</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">247</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">248</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">249</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">250</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># fields nodes</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">251</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$fieldsChildNodes</span> = <span class="variable">$commXmlData</span>.template.fields.ChildNodes</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">252</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">253</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">254</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># terminal config tab key 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">255</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$terminalConfigTabKey</span> = <span class="string">"TerminalConfig"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">256</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># terminal config tab name 值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">257</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$terminalConfigTabName</span> = <span class="string">"TerminalConfig"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">258</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># terminal config tab tab fields 内容</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">259</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$terminalConfigTabFields</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">260</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">261</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="variable">$k</span>=<span class="number">0</span>;<span class="variable">$k</span> <span class="nomarkup">-lt</span> <span class="variable">$fieldsChildNodes</span>.Count;<span class="variable">$k</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">262</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">263</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$key</span> = getValueById <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].id</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">264</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$name</span> = <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">265</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$default</span> = <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].defaultValue</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">266</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$field</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">267</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$body</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">268</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">269</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>(<span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].LocalName.Equals(<span class="string">"choiceField"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">270</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">271</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">for</span>(<span class="variable">$l</span>=<span class="number">0</span>;<span class="variable">$l</span> <span class="nomarkup">-lt</span> <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].ChildNodes.Count;<span class="variable">$l</span>++)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">272</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 排除掉注释语句</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">273</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span>(!<span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].ChildNodes[<span class="variable">$l</span>].NodeType.ToString().Equals(<span class="string">"Comment"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">274</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 生成 fields 子元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">275</span></pre></td><td class="code"><pre><span class="line">                <span class="variable">$field</span> += (getFildesElement <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].ChildNodes[<span class="variable">$l</span>].label <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].ChildNodes[<span class="variable">$l</span>].value) + <span class="string">","</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">276</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">277</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">278</span></pre></td><td class="code"><pre><span class="line">       </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">279</span></pre></td><td class="code"><pre><span class="line">        <span class="comment"># 生成 dropdown 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">280</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$body</span> = (getDropdownElement <span class="variable">$key</span> <span class="variable">$name</span> <span class="variable">$default</span> <span class="variable">$field</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">281</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">282</span></pre></td><td class="code"><pre><span class="line">    &#125;<span class="keyword">elseif</span>(<span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].LocalName.Equals(<span class="string">"dataField"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">283</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$min</span> = <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].minLength</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">284</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$max</span> = <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].maxLength</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">285</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">286</span></pre></td><td class="code"><pre><span class="line">        <span class="comment"># 生成 txt 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">287</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$body</span> = (getTextElement <span class="variable">$key</span> <span class="variable">$name</span> <span class="variable">$default</span> <span class="variable">$min</span> <span class="variable">$max</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">288</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">289</span></pre></td><td class="code"><pre><span class="line">    &#125;<span class="keyword">elseif</span>(<span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>].LocalName.Equals(<span class="string">"structureField"</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">290</span></pre></td><td class="code"><pre><span class="line">        <span class="comment"># 获取各个 tab json string</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">291</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$templateNodes</span> += (getStructureFieldNodeJson <span class="variable">$fieldsChildNodes</span>[<span class="variable">$k</span>]) + <span class="string">","</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">292</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">293</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">294</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 排除注释节点</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">295</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>(!<span class="variable">$body</span>.Equals(<span class="string">""</span>))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">296</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$terminalConfigTabFields</span> += <span class="variable">$body</span> + <span class="string">","</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">297</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">298</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">299</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">300</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">301</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成最终 terminal config tab 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">302</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$terminalConfigTabBody</span> = getTabString <span class="variable">$terminalConfigTabKey</span> <span class="variable">$terminalConfigTabName</span> <span class="variable">$terminalConfigTabFields</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">303</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">304</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">305</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拼接生成 template nodes 元素 json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">306</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateNodes</span> +=  <span class="variable">$terminalConfigTabBody</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">307</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">308</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 template json 字符串</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">309</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateBody</span> = (getTemplate <span class="variable">$templateVsersion</span> <span class="variable">$templateNodes</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">310</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成最终 json 文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">311</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$templateBody</span> | <span class="built_in">Out-File</span> mbbconfig.json -Encoding utf8</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">312</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">313</span></pre></td><td class="code"><pre><span class="line">echo <span class="string">"Generator json template success"</span></span></pre></td></tr></table></figure>
</li>
<li><p><a href="https://www.pstips.net/xml-structure.html" target="_blank" rel="noopener">PowerShell处理XML（一）XML 结构</a></p>
</li>
</ul>
<h3 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h3><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[System.IO.File]::WriteAllText(<span class="variable">$file</span>.FullName, <span class="variable">$result</span>, [System.Text.Encoding]::UTF8)</span></pre></td></tr></table></figure>

<h3 id="读写中文字体文件-不出现乱码"><a href="#读写中文字体文件-不出现乱码" class="headerlink" title="读写中文字体文件(不出现乱码)"></a>读写中文字体文件(不出现乱码)</h3><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">// string_zh_cn.h 文件是中文并且以 GB18030 编码保存</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$strFile</span> = <span class="string">'.\string_zh_cn.h'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span> = <span class="built_in">Get-Content</span> <span class="variable">$strFile</span> -Raw</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$result</span> = <span class="variable">$content</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (<span class="variable">$stringId</span> <span class="keyword">in</span> <span class="variable">$stringIDArray</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$result</span> = [regex]::Replace(<span class="variable">$result</span>, <span class="string">"&amp;<span class="variable">$stringId</span>"</span>, <span class="string">'(+++&#123;0&#125;-----)'</span> -f <span class="variable">$stringId</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$result</span> <span class="nomarkup">-ne</span> <span class="variable">$content</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    // 这里保存新文件时必须要以 UTF8 格式</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$result</span> | <span class="built_in">Out-File</span> -FilePath <span class="variable">$strFile</span> -Encoding utf8</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="去除文件重复语句"><a href="#去除文件重复语句" class="headerlink" title="去除文件重复语句"></a>去除文件重复语句</h3><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$sourceFile</span>=<span class="string">".\last_time_cn.md"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$newFile1</span>=<span class="string">".\unicque1.md"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#$newFile2=".\unicque2.md"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># Method one:</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[System.Collections.Generic.HashSet[string]]<span class="variable">$lines</span> = <span class="built_in">Get-Content</span> -Path <span class="variable">$sourceFile</span> -ReadCount <span class="number">0</span> -Encoding UTF8</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-Content</span>  -Path <span class="variable">$newFile1</span> -Value (<span class="variable">$lines</span> -join <span class="string">"`r`n"</span>) -Encoding UTF8</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># Method two:</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#$ls = Get-Content -Path $sourceFile -ReadCount 0 | Select-Object -Unique</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#Set-Content -Path $newFile2 -Value ($lines -join "`r`n")</span></span></pre></td></tr></table></figure>

<h3 id="正则表达式替换文件内容"><a href="#正则表达式替换文件内容" class="headerlink" title="正则表达式替换文件内容"></a>正则表达式替换文件内容</h3><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span> = <span class="built_in">Get-Content</span> -LiteralPath <span class="variable">$file</span> -Raw</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$result</span> = [System.Text.RegularExpressions.Regex]::Replace(<span class="variable">$content</span>, <span class="string">'("[\d|A-Za-z| |!|\.|:|\[\]\(\)/_|\-&lt;&gt;=+#*\\n\u4e00-\u9fa5|\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]+")'</span>, &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">param</span>([System.Text.RegularExpressions.Match]<span class="variable">$match</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$number</span> = <span class="variable">$match</span>[<span class="number">0</span>].Groups[<span class="number">1</span>].ToString()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">#Write-Host $number</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        <span class="built_in">write-output</span> <span class="variable">$number</span> | <span class="built_in">out-file</span> -filepath .\temp.txt -Encoding utf8 -Append</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> <span class="variable">$number</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    &#125;)</span></pre></td></tr></table></figure>


<h3 id="提取中英文字幕"><a href="#提取中英文字幕" class="headerlink" title="提取中英文字幕"></a>提取中英文字幕</h3><p>下面是提取纸牌屋的字幕文件(去除字幕文件中的时间轴的其它字符)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!(Test-Path dst)) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    md dst | Out-Null</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">Get-ChildItem src\*.srt | ForEach-Object &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$srcFile</span> = <span class="variable">$_</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    Write-Output <span class="string">"Processing <span class="variable">$($srcFile.Name)</span>"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$dstFile</span> = Join-Path <span class="string">'dst'</span> <span class="variable">$srcFile</span>.Name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    Get-Content <span class="variable">$srcFile</span> | ForEach-Object &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$line</span> = <span class="variable">$_</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (<span class="variable">$line</span> -cmatch <span class="string">'\A\d+\z'</span>) &#123; <span class="built_in">return</span> &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (<span class="variable">$line</span> -cmatch <span class="string">'\d\d:\d\d:\d\d,\d\d\d --&gt; \d\d:\d\d:\d\d,\d\d\d'</span>) &#123; <span class="built_in">return</span> &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$line</span> = <span class="variable">$line</span> -creplace <span class="string">'\s*\&#123;\\.*?\&#125;\s*'</span>, <span class="string">''</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        <span class="built_in">echo</span> <span class="variable">$line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    &#125; | Out-File <span class="variable">$dstFile</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="提取电子书内容"><a href="#提取电子书内容" class="headerlink" title="提取电子书内容"></a>提取电子书内容</h3><p>下面是提取 《权力巅峰》 文本文件的 ps 处理代码。源文件是一个包含所有内容的 txt 文件，脚本会提取文件中的每个章节内容为一个独立的 md 文件，并自动生成 summary.md 目录文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span> = Get-Content .\qldf.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存储目录结构</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$summary</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 卷标题</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$volume</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 章标题</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$chapterTitle</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 章内容</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$chapterContent</span> =<span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span> | ForEach-Object&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$line</span> = <span class="variable">$_</span>.ToString().Trim()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 滤掉空行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>(<span class="variable">$line</span>.Length -gt 0)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">        </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$isVolume</span> = <span class="variable">$line</span> -match <span class="string">'^第[一二三四五六七八九十]+卷'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span>(<span class="variable">$isVolume</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$summary</span> += <span class="string">"* [<span class="variable">$line</span>]`r`n"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">            <span class="comment">#"`r`n## $line" | Out-File -FilePath "$line.md" -Encoding utf8</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">        <span class="variable">$isTitle</span> = <span class="variable">$line</span> -match <span class="string">'^第[\d]+章'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span>(<span class="variable">$isTitle</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 保存一个章节内容为一个文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span>((<span class="variable">$chapterTitle</span>.Length -gt 0) -and (<span class="variable">$chapterContent</span>.Length -gt 0))&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">                <span class="comment"># 文件名称使用 下划线 替换 空格</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">                <span class="variable">$fileName</span> = <span class="variable">$chapterTitle</span>.Replace(<span class="string">' '</span>,<span class="string">'_'</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">                <span class="variable">$summary</span> += <span class="string">"    * [<span class="variable">$chapterTitle</span>](<span class="variable">$fileName</span>.md)`r`n"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">                <span class="string">"`r`n## <span class="variable">$chapterTitle</span> `r`n`r`n <span class="variable">$chapterContent</span>"</span> | Out-File -FilePath <span class="string">"<span class="variable">$fileName</span>.md"</span> -Encoding utf8</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">            </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">            <span class="comment"># 清空,重新开始记录</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$chapterTitle</span> = <span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$chapterContent</span> =<span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$chapterTitle</span> = <span class="variable">$line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">        &#125;<span class="keyword">else</span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">            <span class="variable">$chapterContent</span> += <span class="variable">$line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">   &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line"><span class="string">"# Summary`r`n`r`n* [简介](README.md)`r`n`r`n<span class="variable">$summary</span>"</span> | Out-File -FilePath <span class="string">"summary.md"</span> -Encoding utf8</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">Write-Host <span class="string">'Done'</span></span></pre></td></tr></table></figure>


<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li><p>powershell 调用优先级: 别名 —&gt; 函数 -&gt; 命令 -&gt; 脚本(*.ps1) -&gt; 可执行文件</p>
</li>
<li><p>变量名不区分大小写</p>
</li>
<li><p>ps 所有的变量保存在 <code>variable</code> 驱动器中</p>
</li>
<li><p>显示环境变量: ls env:</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">// 更新到系统环境变量中</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">PS&gt; [environment]::SetEnvironmentvariable(<span class="string">"Path"</span>, <span class="string">";c:\powershellscript"</span>, <span class="string">"User"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">PS&gt; [environment]::GetEnvironmentvariable(<span class="string">"Path"</span>, <span class="string">"User"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">;c:\powershellscript</span></pre></td></tr></table></figure></li>
<li><p>数组是固定大小,内部的内存是连续分布的，所以要添加新元素只能重新创建一个新的数组，添加使用 <code>$arr += xxx</code></p>
</li>
<li><p>去除数组中重复元素</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$arr1</span> = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$arr2</span> = <span class="variable">$arr1</span> | <span class="built_in">Get-Unique</span></span></pre></td></tr></table></figure></li>
<li><p>统计文件数据</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">// 统计单词，行数，大小</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-Content</span> .word.txt | measure -Line -Word -Character</span></pre></td></tr></table></figure></li>
<li><p>开启调试模式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$DebugPreference</span>=<span class="string">"Continue"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">// wrte-debug 只有在调试模式下才会输出信息</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">write-debug <span class="string">'Hello'</span></span></pre></td></tr></table></figure>
</li>
<li><p>关闭调试模式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$DebugPreference</span>=<span class="string">"SilentlyContinue"</span></span></pre></td></tr></table></figure>
</li>
<li><p>在函数避免错误信息作为返回值正确做法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Function ErrorTest()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">#从这里开始隐藏所有的错误信息</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$ErrorActionPreference</span>=<span class="string">"SilentlyContinue"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    Stop-Process -Name <span class="string">"www.mossfly.com"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">#该进程不存在</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">#恢复$ErrorActionPreference,错误开始输出</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="variable">$ErrorActionPreference</span>=<span class="string">"Continue"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
</li>
<li><p>定义多行文本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Here strings 定义多行文本</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">@<span class="string">"#独立一行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="string">字符串”@格式定义多行文本，尤其是较长的文本，再好不过了</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="string"></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="string">这首诗用来评价陶渊明的诗歌再好不过了</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="string"> </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="string">一语天然万古新，豪华落尽见真淳。</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="string">南窗白日羲皇上，未害渊明是晋人。</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="string">"</span>@<span class="comment">#独立一行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">//这里要注意开始和结束的标记必须另起一行。</span></pre></td></tr></table></figure>
</li>
<li><p>生成全球唯一标识符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$guid</span> = [GUID]::NewGUID()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    Foreach (<span class="variable">$format</span> <span class="keyword">in</span> <span class="string">"N"</span>,<span class="string">"D"</span>,<span class="string">"B"</span>,<span class="string">"P"</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="string">"GUID with <span class="variable">$format</span> : &#123;0&#125;"</span> -f <span class="variable">$GUID</span>.ToString(<span class="variable">$format</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">//GUID with N : e1a5d98f4227470b84c2b37a6a8fb894</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">//GUID with D : e1a5d98f-4227-470b-84c2-b37a6a8fb894</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">//GUID with B : &#123;e1a5d98f-4227-470b-84c2-b37a6a8fb894&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">//GUID with P : (e1a5d98f-4227-470b-84c2-b37a6a8fb894)</span></pre></td></tr></table></figure>
</li>
<li><p>移除 String 中 split 方法空元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="string">"https://www.pstips.net"</span>.split(<span class="string">":./"</span>,[StringSplitOptions]::RemoveEmptyEntries)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">http</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">www</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">pstips</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">net</span></pre></td></tr></table></figure>
</li>
<li><p>正则表达式中的 ignore,multiline 表示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="string">"Abcdeafewe"</span> -match <span class="string">"(?i)abcd"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">// True</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="string">"Abcdeafewe"</span> -match <span class="string">"(?-i)abcd"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">// False</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$text</span> = @<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="string">这是一段文本，</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="string">我想在回复的邮件中引用它，</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="string">所以我在每行的开始追加了"</span>&gt;<span class="string">" 符号。</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="string">"</span>@</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$text</span> -replace <span class="string">"(?m)^"</span>, <span class="string">"&gt; "</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&gt; 这是一段文本，</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">&gt; 我想在回复的邮件中引用它，</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">&gt; 所以我在每行的开始追加了<span class="string">"&gt;"</span> 符号。</span></pre></td></tr></table></figure>
</li>
<li><p>换行符号使用 `(数字 1 左边)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[regex]::Replace(<span class="variable">$text</span>, <span class="string">"\A"</span>, <span class="string">"&gt; "</span>, `</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[Text.RegularExpressions.RegExOptions]::Multiline)</span></pre></td></tr></table></figure>
</li>
<li><p>条件操作符</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-eq</span> ：等于</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-ne</span> ：不等于</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-gt</span> ：大于</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-ge</span> ：大于等于</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-lt</span> ：小于</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-le</span> ：小于等于</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-contains</span> ：包含</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-notcontains</span> :不包含</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">-and ：和</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">-or ：或</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">-xor ：异或</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="nomarkup">-not</span> ：逆</span></pre></td></tr></table></figure></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-11-16 </div>
			<div class="article-title"><a href="/2018/11/16/2018-11-16-gitbook-start/" >Gitbook</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="开源工具链"><a href="#开源工具链" class="headerlink" title="开源工具链"></a>开源工具链</h2><p>这个工具链 (GitBook) 是一个使用 Git 和 Markdown 来构建书籍的工具。它可以将你的书输出很多格式：PDF，ePub，mobi，或者输出为静态网页<br>GitBook 工具链是开源并且完全免费的，它的源码可以在 <a href="https://github.com/GitbookIO/gitbook" target="_blank" rel="noopener">GitHub</a> 上获取<br>与格式和工具链相关的问题被发表在 <a href="https://github.com/GitbookIO/gitbook/issues" target="_blank" rel="noopener">github.com/GitbookIO/gitbook/issues</a></p>
<h2 id="GitBook-com"><a href="#GitBook-com" class="headerlink" title="GitBook.com"></a>GitBook.com</h2><p>GitBook.com 是一个使用工具链来创建和托管书籍的在线平台 (<a href="https://www.gitbook.com/" target="_blank" rel="noopener">www.gitbook.com</a>)</p>
<h2 id="其他文档"><a href="#其他文档" class="headerlink" title="其他文档"></a>其他文档</h2><p>开发文档 (API &amp; 插件) 地址 <a href="http://developer.gitbook.com/" target="_blank" rel="noopener">developer.gitbook.com</a>。<br>企业版本的安装向导和手册的地址 <a href="http://help.enterprise.gitbook.com/" target="_blank" rel="noopener">hep.enterprise.gitbook.com</a></p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>在使用 <code>gitbook pdf/epub/mobi</code> 生成电子文档时，需要先安装 <a href="https://calibre-ebook.com/download_windows" target="_blank" rel="noopener">calibre</a> 转换软件，否则会转换不成功。</p>
<h2 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h2><h3 id="RangeError-Maximum-call-stack-size-exceeded"><a href="#RangeError-Maximum-call-stack-size-exceeded" class="headerlink" title="RangeError: Maximum call stack size exceeded"></a><code>RangeError: Maximum call stack size exceeded</code></h3><p>默认的搜索插件建立的索引过大溢出,可以使用下面方法解决,使用 lunr 插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// book.json</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="string">"plugins"</span>: [<span class="string">"-lunr"</span>,<span class="string">"autohome-fix-link"</span>,<span class="string">"page-footer-copyright"</span>],</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="string">"pluginsConfig"</span>: &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="string">"autohome-fix-link"</span>: &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        <span class="string">"link"</span>: <span class="string">"https://www.npmjs.com/"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="string">"lunr"</span>: &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        <span class="string">"maxIndexSize"</span>: <span class="number">100000000000000</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">   &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/GitbookIO/gitbook/issues/1009" target="_blank" rel="noopener">RangeError: Maximum call stack size exceeded #1009</a></li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://github.com/GitbookIO/gitbook" target="_blank" rel="noopener">gitbook git</a></li>
<li><a href="https://calibre-ebook.com/download_windows" target="_blank" rel="noopener">calibre windows</a></li>
<li><a href="https://chrisniael.gitbooks.io/gitbook-documentation/content/format/markdown.html" target="_blank" rel="noopener">gitbook 中文文档</a></li>
<li><a href="https://www.cnblogs.com/zhangjk1993/p/5066771.html" target="_blank" rel="noopener">gitbook 实用配置及插件介绍</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-30 </div>
			<div class="article-title"><a href="/2018/07/30/2018-07-30-baidu-yun-pan-download-tools/" >百度网盘内容下载工具</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>360网盘关闭后，百度似乎要成为国内网盘的唯一选择，然而百度云下载速度太慢，显然是被限速了，吃相难看。下面有3个方法解决百度网盘限速的问题，演示的下载文件是大于1G的一个 <a href="https://www.runningcheese.com/go/?url=https://pan.baidu.com/s/1miMaRiw" target="_blank" rel="noopener">War3.zip</a> 单文件（用拖拽的方法打开，否则显示页面不存在），使用的宽带是电信20M，百度限速后的下载速度只有256KB/s，而理论上的下载速度是可以达到2M/s的。奶酪也将持续关注百度网盘限速的问题。  </p>
<h2 id="1-百度网盘下载助手脚本-—-2018-04-15更新【最长久】"><a href="#1-百度网盘下载助手脚本-—-2018-04-15更新【最长久】" class="headerlink" title="1. 百度网盘下载助手脚本 — 2018-04-15更新【最长久】"></a>1. 百度网盘下载助手脚本 — 2018-04-15更新【最长久】</h2><p>最早是网友“有一份田”制作的脚本百度下载助手，可以显示直链，绕过大文件云盘下载，还可以调用<a href="https://www.runningcheese.com/go/?url=http://dl.xunlei.com/" target="_blank" rel="noopener">迅雷</a>或者<a href="https://www.runningcheese.com/go/?url=http://www.zdfans.com/575.html" target="_blank" rel="noopener">IDM</a>加速下载。</p>
<p><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1fqei3eshpyj20k00ci3yq.jpg" alt=""><br><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1fqei3mv5tej20k00ad74e.jpg" alt=""></p>
<p><strong>使用方法：</strong><br>1、浏览器安装拓展 <a href="https://www.runningcheese.com/go/?url=https://violentmonkey.github.io/get-it/" target="_blank" rel="noopener">Violentmonkey</a> 或者 <a href="https://www.runningcheese.com/go/?url=http://tampermonkey.net/" target="_blank" rel="noopener">Tampermonkey</a><br>2、安装下载脚本：<a href="https://www.runningcheese.com/go/?url=https://greasyfork.org/zh-CN/scripts/39776" target="_blank" rel="noopener">https://greasyfork.org/zh-CN/scripts/39776</a><br>3、用迅雷或IDM下载时，点击“直接下载”，然后将链接复制到迅雷或IDM中去下载，支持在网盘管理页面和文件分享页面生效。</p>
<p><strong>注意：</strong><br>1、IDM绿色版需要点击运行文件 “!绿化卸载.bat” 才会自动关联下载。<br>2、如果你不太会怎么操作，你可以尝试一下已经集成好脚本的Firefox浏览器：<a href="https://www.runningcheese.com/v10" target="_blank" rel="noopener">https://www.runningcheese.com/v10</a><br>（下载后需要在右上角的那个“火箭”图标里选择“系统工具”，然后再选择“设置IDM”，这样就会自动调用IDM下载了。）<br>3、如果下载速度被限制在100KB左右，说明你的帐号被百度网盘拉黑了，需要退出登录才能恢复正常下载。<br>4、如果下载速度在200-700KB左右，可以在“设置–&gt;连接”中，将最达连接数设置为16或者32.<br>5、在文件分享页面，直接选择文件夹会无法下载，可以同时勾选下载任意一个文件，让文件夹与文件同时下载，这时即可下载。</p>
<p><strong>另附：</strong><br>迅雷极速版下载：<a href="https://www.runningcheese.com/go/?url=http://www.pc6.com/softview/softview_108931.html" target="_blank" rel="noopener">http://www.pc6.com/softview/softview_108931.html</a><br>IDM 绿色版下载：<a href="https://www.runningcheese.com/go/?url=https://pan.baidu.com/share/init?shareid=3457730696&uk=1767948507#3edk" target="_blank" rel="noopener">https://pan.baidu.com/share/init?shareid</a> 密码 3edk </p>
<h2 id="2-度盘下载器-—-2018-05-14更新-【速度最快】"><a href="#2-度盘下载器-—-2018-05-14更新-【速度最快】" class="headerlink" title="2. 度盘下载器 — 2018-05-14更新 【速度最快】"></a>2. 度盘下载器 — 2018-05-14更新 【速度最快】</h2><p>PanDownload二代，最新度盘不限速！！实测速度最高可达5MB/S，采用了Aria 2技术，下载自动切换线路，支持设置超高线程爆速下载。由原作者双霖等人开发，2.0版界面全新设计。</p>
<p><a href="https://ww3.sinaimg.cn/large/7a6a15d5gy1fjgvc3ziunj20nq08x41v.jpg" target="_blank" rel="noopener"><img src="https://ww3.sinaimg.cn/large/7a6a15d5gy1fjgvc3ziunj20nq08x41v.jpg" alt=""></a></p>
<p>下载地址： （v2.31最新）<br>链接: <a href="https://www.runningcheese.com/go/?url=https://pan.lanzou.com/i0irygf" target="_blank" rel="noopener">https://pan.lanzou.com/i0irygf</a>  </p>
<h2 id="3-速盘-—-2018-07-10更新-【功能最强大】"><a href="#3-速盘-—-2018-07-10更新-【功能最强大】" class="headerlink" title="3. 速盘 — 2018-07-10更新 【功能最强大】"></a>3. 速盘 — 2018-07-10更新 【功能最强大】</h2><p>由吾爱破解论坛会员“菩提叶”制作的度盘满速下载工具。这款百度网盘高速下载工具，免费小巧简单易用，采用了Aria2多线程下载，支持免登陆网盘账号解析分享链接下载，支持百度网盘网络资源搜索并下载，登陆我的网盘账户可以下载网盘文件，还能离线下载。下载地址： （v1.4.1最新）</p>
<p><a href="https://ws1.sinaimg.cn/large/7a6a15d5gy1fsfmoq7izgj20sg0icgmp.jpg" target="_blank" rel="noopener"><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1fsfmoq7izgj20sg0icgmp.jpg" alt=""></a></p>
<p>功能介绍：<br>1、百度网盘不限速下载 （正常情况下都可以满宽带）<br>2、分享链接下载 （不需要登录）<br>3、分享资源搜索并下载（不需要等录）<br>4、离线下载 （离线下载需要登录）<br>5、其它网盘常规操作，如创建文件夹，创建分享链接，删除等（访问自己的网盘需要登录） 6、登录时调用的是百度的登录页，只记录登录cookie，不会保存用户密码等信息。  </p>
<h2 id="4-PanDownload-—-2018-03-10更新-【最早】"><a href="#4-PanDownload-—-2018-03-10更新-【最早】" class="headerlink" title="4. PanDownload — 2018-03-10更新 【最早】"></a>4. PanDownload — 2018-03-10更新 【最早】</h2><p>52Pojie网友@<a href="https://www.runningcheese.com/go/?url=http://www.52pojie.cn/thread-579335-1-1.html" target="_blank" rel="noopener">Kiryuu</a> 制作作的一个C#语言下载工具，工作原理和方法5类似，可满速下载。登陆自己的账号选择文件下载即可，这对于不会使用脚本的人来说非常的方便，作者提供了一个检查更新的通道，可供持续检查更新，这样就不怕软件失效了。</p>
<p>下载地址：（ v1.5.4最新）<br><a href="https://www.runningcheese.com/go/?url=https://pan.lanzou.com/b1733233/" target="_blank" rel="noopener">https://pan.lanzou.com/b173323/</a><br>备用下载：<a href="https://www.runningcheese.com/baiduyun" target="_blank" rel="noopener"></a></p>
<p><a href="https://ww3.sinaimg.cn/large/7a6a15d5gy1fdal9isi9mj20cm0e6q2z.jpg" target="_blank" rel="noopener"><img src="https://ww3.sinaimg.cn/large/7a6a15d5gy1fdal9isi9mj20cm0e6q2z.jpg" alt=""></a>  </p>
<h2 id="5-Proxyee-down-—-2018-07-20更新-【支持MAC】"><a href="#5-Proxyee-down-—-2018-07-20更新-【支持MAC】" class="headerlink" title="5. Proxyee down — 2018-07-20更新 【支持MAC】"></a>5. Proxyee down — 2018-07-20更新 【支持MAC】</h2><p><a href="https://www.runningcheese.com/go/?url=https://github.com/proxyee-down-org/proxyee-down" target="_blank" rel="noopener">Proxyee down</a> 使用本地http代理服务器方式嗅探下载请求，支持所有操作系统和大部分主流浏览器,支持分段下载和断点下载。</p>
<p><img src="https://ws1.sinaimg.cn/large/7a6a15d5gy1ftl7pzoy21j20l206j0sy.jpg" alt=""></p>
<p>下载地址：（ v2.5.4最新）<br><a href="https://www.runningcheese.com/go/?url=https://github.com/proxyee-down-org/proxyee-down/releases" target="_blank" rel="noopener">https://github.com/proxyee-down-org/proxyee-down/releases</a></p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>1，下载链接如若失效，或者高速下载上述软件，<a href="https://ws1.sinaimg.cn/large/7a6a15d5gy1fr3v1xxt8ej205k05kt8p.jpg" target="_blank" rel="noopener">公众号</a>（ID: runningcheese01）回复关键字“百度云”即可获取。  </p>
<p>2，最后，利用这些方法可以在百度网盘离线下载一些冷门的磁力资源并获得最高的下载速度，方法我想应该不用我说了吧？</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.runningcheese.com/baiduyun" target="_blank" rel="noopener">原文</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-23 </div>
			<div class="article-title"><a href="/2018/07/23/2018-07-23-rxjava-encapsulation-fun/" >RxJava 函数封装</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="一、封装同步函数"><a href="#一、封装同步函数" class="headerlink" title="一、封装同步函数"></a>一、封装同步函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable <span class="title">wrappedMethod</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> Observable.defer(() -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> Observable.just(library.synchronousMethod());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr></table></figure>
<p>如果你的库拥有可用的同步方法，那么将其用 RxJava 封装起来的最好的方式是使用 <code>Observable.defer()</code>这会简单地延迟这个调用直到 observable 被订阅，然后在 subscription 的分配线程中执行</p>
<h2 id="二、封装抛出异常的同步方法"><a href="#二、封装抛出异常的同步方法" class="headerlink" title="二、封装抛出异常的同步方法"></a>二、封装抛出异常的同步方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable <span class="title">queryInventory</span><span class="params">(<span class="keyword">final</span> List skus)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">return</span> Observable.defer(() -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> Observable.just(helper.queryInventory(skus));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">catch</span> (IabException e) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> Observable.error(e);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">  &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>将同步调用的代码用 try-catch 包起来，并根据结果返回 <code>Observable.just()</code> 或是 <code>Observable.error()</code>,这里不能直接使用 <code>Observable.just()</code> 方法，因为它抛出的 <code>IabException</code> 并不是 <code>RuntimeException</code> 的子类，因此必须被捕获。</p>
<h2 id="三、封装带有监听器的方法"><a href="#三、封装带有监听器的方法" class="headerlink" title="三、封装带有监听器的方法"></a>三、封装带有监听器的方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable <span class="title">setup</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">return</span> Observable.create( emitter -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (!helper.setupSuccessful()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      helper.startSetup(result -&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> ( emitter.isUnsubscribed()) <span class="keyword">return</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (result.isSuccess()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">           emitter.onNext(<span class="keyword">null</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">           emitter.onCompleted();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">           emitter.onError(<span class="keyword">new</span> IabException(result.getMessage()));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">      &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">       emitter.onNext(<span class="keyword">null</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">       emitter.onComplete();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">  &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>封装那些使用了监听器的方法时，<code>Observable.just()</code> 并不管用，因为它一般没有返回值。我们必须使用 <code>Observable.create()</code>,这样我们就可以将监听器的结果回调给  emitter</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0413/4141.html" target="_blank" rel="noopener">使用 RxJava 封装现有的库</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-23 </div>
			<div class="article-title"><a href="/2018/07/23/2018-07-23-rxjava-map/" >RxJava Map</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="一、变换"><a href="#一、变换" class="headerlink" title="一、变换"></a>一、变换</h2><h3 id="1-Map"><a href="#1-Map" class="headerlink" title="1. Map"></a>1. Map</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">String[] str1 = &#123;<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Observable.fromArray(str1)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// 这里用了 Function 包装接口，返回一个新的值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        .map(<span class="keyword">new</span> Function&lt;String, String&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">return</span> <span class="string">"apply: "</span> + s;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        &#125;)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">                System.out.println(<span class="string">"s = ["</span> + s + <span class="string">"]"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">        &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行结果</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行结果</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">s = [apply <span class="number">1</span>]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">s = [apply <span class="number">2</span>]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">s = [apply <span class="number">3</span>]</span></pre></td></tr></table></figure>

<h3 id="2-FlatMap"><a href="#2-FlatMap" class="headerlink" title="2. FlatMap"></a>2. FlatMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 学生类</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> String name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> String [] course;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, String[] course)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>.name = name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>.course = course;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> String[] getCourse() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> course;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">String[] course1 = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">String[] course2 = &#123;<span class="string">"d"</span>,<span class="string">"e"</span>,<span class="string">"f"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">Student[] students = &#123;<span class="keyword">new</span> Student(<span class="string">"kuku"</span>,course1),<span class="keyword">new</span> Student(<span class="string">"lili"</span>,course2)&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里通过 flatMap 获取每个学生的课程</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">Observable.fromArray(students)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        .flatMap(<span class="keyword">new</span> Function&lt;Student, ObservableSource&lt;String&gt;&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">            <span class="comment">// 多了一层 Observable 来处理</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> ObservableSource&lt;String&gt; <span class="title">apply</span><span class="params">(Student student)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">return</span> Observable.fromArray(student.getCourse());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">        &#125;)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">            <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">                System.out.println(<span class="string">"s = ["</span> + s + <span class="string">"]"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">        &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行结果</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">s = [a]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">s = [b]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">s = [c]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">s = [d]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">s = [e]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">s = [f]</span></pre></td></tr></table></figure>


<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-07-02 </div>
			<div class="article-title"><a href="/2018/07/02/2018-07-02-android-log/" >Android 日志分类</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="Android-日志分类"><a href="#Android-日志分类" class="headerlink" title="Android 日志分类"></a>Android 日志分类</h2><h3 id="1-ANR-Application-Not-Responding"><a href="#1-ANR-Application-Not-Responding" class="headerlink" title="1. ANR(Application Not Responding)"></a>1. ANR(Application Not Responding)</h3><p>主要是说应用程序出现无响应的情况。在这个情况出现的时候同时在手机界面会弹出响应的对话框，提示应用程序无响应　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　 </p>
<h4 id="1-1-ANR-的几种类型"><a href="#1-1-ANR-的几种类型" class="headerlink" title="1.1 ANR 的几种类型:"></a>1.1 ANR 的几种类型:</h4><p>当运行指定的APP，如果 Android 系统检测到符合下边的几种条件那就会弹出应用程序无响应的界面。　　　</p>
<ul>
<li>按键超时　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<br>Android 默认的响应时间是 <strong>5s</strong>，如果一个触屏事件超过 <strong>5s</strong>，那么就会发生此现象。　　　　　　　                 </li>
<li>广播超时<br>广播的默认响应时间是 <strong>10s</strong>，如果一个广播在 <strong>10s</strong> 之内还没有执行完，那么就会出现此现象。                          </li>
<li>服务超时<br>服务的默认响应事件是 <strong>20s</strong>,如果请求的服务在 <strong>20s</strong> 内失败，那么就会发生此现象。</li>
</ul>
<h3 id="1-2-ANR-事件与异常的区别"><a href="#1-2-ANR-事件与异常的区别" class="headerlink" title="1.2 ANR 事件与异常的区别"></a>1.2 ANR 事件与异常的区别</h3><p>ANR 事件是由于一些操作的原因或者是反应事件较慢会出现程序无响应的情况，而异常是程序由于代码或者是一些其他的原因出现程序停止运行的情况，这两种情况的性质是完全不一样的。　　　　　　　   </p>
<h3 id="1-3-与-ANR-相关的一些东西"><a href="#1-3-与-ANR-相关的一些东西" class="headerlink" title="1.3 与 ANR 相关的一些东西"></a>1.3 与 ANR 相关的一些东西</h3><ul>
<li>Java 进程分为主线程和主消息队列</li>
<li>主线程主要是用来处理一些有关 UI 事件，比如画图，监听或是接受 UI 事件。　　　　　　　　　　　　   </li>
<li>主线程还要从主消息队列取出一些消息并且能够尽可能快的处理这些消息</li>
<li>在主线程还没有处理完当前的消息的时候，他是不能再去取下一条消息的</li>
<li>如果主线程没有及时处理掉这个消息，那么 ANR 事件就会发生。　　　　　　　　　　　　　　　　　  </li>
</ul>
<h3 id="1-4-如何分析-ANR"><a href="#1-4-如何分析-ANR" class="headerlink" title="1.4 如何分析 ANR"></a>1.4 如何分析 ANR</h3><ul>
<li>首先需要找出 ANR 发生的事件，进程号，还有 ANR 的类型。　　　　　　　　　　　　　　　　　　　　</li>
<li>检查 CPU 的内存使用情况。　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　</li>
<li>需要检查文件 trace.txt，还有映射进程，时间戳等信息。　　　　　　　　　　　　　　　　　　　　　　</li>
<li>通过 main log 和 event log 寻找更多的有用信息，用来分析问题　　　　　　　　　　　　　　　　   </li>
</ul>
<h3 id="1-5-分析-ANR-需要注意的地方："><a href="#1-5-分析-ANR-需要注意的地方：" class="headerlink" title="1.5 分析 ANR 需要注意的地方："></a>1.5 分析 ANR 需要注意的地方：</h3><ul>
<li>尽可能使用 eng 版本去抓取 log，因为 eng 版本抓取的 log 是最全面的，有些 log 在 eng 版本下才会打开　</li>
<li>我们还需要抓取一些很重要的 log 文件，提供给 MTK 分析使用，让他们帮着一起分析问题所在</li>
</ul>
<h3 id="1-6-导出日子方法："><a href="#1-6-导出日子方法：" class="headerlink" title="1.6 导出日子方法："></a>1.6 导出日子方法：</h3><p>anr 问题的 log 一般都在 <code>/data/anr/</code> 目录下，使用如下命令即可导出 log</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">adb pull /data/anr/traces.txt   d:/ </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">// 将手机上的 traces.txt 导出到电脑的 d 目录下</span></pre></td></tr></table></figure>

<p>但是也会有该命令失效的时候。你能 adb shell ls /data/anr/  看到该文件，但是导出时会提示该文件不存在，原因没有去跟，但是导出的方式可以如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">adb shell </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">cat  /data/anr/xxx   &gt;/mnt/sdcard/yy/zz.txt   </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">adb pull /mnt/sdcard/yy/zz.txt  d: // 即可将文件导出到了d盘。</span></pre></td></tr></table></figure>

<h3 id="2-FC-Force-Close"><a href="#2-FC-Force-Close" class="headerlink" title="2. FC(Force Close)"></a>2. FC(Force Close)</h3><p>Force Close,意为强行关闭，当前应用程序发生了冲突，例如:</p>
<ul>
<li>NullPointExection（空指针）</li>
<li>IndexOutOfBoundsException（下标越界），</li>
<li>Android API 使用的顺序错误也可能导致（比如 setContentView() 之前进行了 findViewById()操作）等等一系列未捕获异常</li>
</ul>
<p>解决办法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">extends</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Thread</span>.<span class="title">UncaughtExceptionHandler</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">int</span> a[];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">      <span class="comment">// TODO Auto-generated method stub</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">      Thread.setDefaultUncaughtExceptionHandler(<span class="keyword">this</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">int</span> i = a[<span class="number">0</span>];<span class="comment">//异常</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">  <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread arg0, Throwable arg1)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">      <span class="comment">// TODO Auto-generated method stub</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">      Log.i(<span class="string">"tag"</span>, <span class="string">"childThread:截获到forceclose，异常原因为："</span> + <span class="string">"\n"</span> +</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">              arg1.toString()+<span class="string">"  Thread-&gt;"</span>+arg0.getId()+<span class="string">" 本线程id-&gt;"</span>+Thread.currentThread().getId()+<span class="string">" "</span>+</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">              Thread.currentThread().getName());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">      android.os.Process.killProcess(android.os.Process.myPid());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>


<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://blog.csdn.net/u010586698/article/details/51213092" target="_blank" rel="noopener">Application Not Responding(ANR)的事件分析</a></li>
<li><a href="https://blog.csdn.net/weixin_37730482/article/details/70830844" target="_blank" rel="noopener">关于Android Force Close 出现的原因 以及解决方法</a></li>
</ul>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-06-26 </div>
			<div class="article-title"><a href="/2018/06/26/2018-06-26-android-recyclerview-divider/" >RecyclerView 设置分割线方法</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="一、最简单的方法（布局划线）"><a href="#一、最简单的方法（布局划线）" class="headerlink" title="一、最简单的方法（布局划线）"></a>一、最简单的方法（布局划线）</h2><p>在 item.xml 文件中在最下方指定一条分割线</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span> <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/image_view"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">TextView</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/text_view"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">"left"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"10dp"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">View</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"1dp"</span>  </span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>/&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span></pre></td></tr></table></figure>

<h2 id="二、重载-DividerItemDecoration-类"><a href="#二、重载-DividerItemDecoration-类" class="headerlink" title="二、重载 DividerItemDecoration 类"></a>二、重载 DividerItemDecoration 类</h2><p>使用方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 添加默认分割线：高度为<span class="number">2</span>px，颜色为灰色</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(mContext, LinearLayoutManager.VERTICAL));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> 添加自定义分割线：可自定义分割线drawable</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    mContext, LinearLayoutManager.VERTICAL, R.drawable.divider_mileage));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>. 添加自定义分割线：可自定义分割线高度和颜色</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">mRecyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    mContext, LinearLayoutManager.VERTICAL, <span class="number">10</span>, getResources().getColor(R.color.divide_gray_color)));</span></pre></td></tr></table></figure>
<p>类实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.neso.settings;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v4.content.ContextCompat;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v7.widget.LinearLayoutManager;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.view.View;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecycleViewDivider</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ItemDecoration</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> Paint mPaint;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> Drawable mDivider;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// dividing line height,default 1px</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 分割线高度，默认为 1px</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mDividerHeight = <span class="number">2</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// list orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 列表的方向：LinearLayoutManager.VERTICAL 或 LinearLayoutManager.HORIZONTAL</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mOrientation;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] ATTRS = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;android.R.attr.listDivider&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * default dividing line,height 2px,color is gray</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * 默认分割线：高度为 2px，颜色为灰色</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     *</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecycleViewDivider</span><span class="params">(Context context, <span class="keyword">int</span> orientation)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (orientation != LinearLayoutManager.VERTICAL &amp;&amp; orientation != LinearLayoutManager.HORIZONTAL) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid orientation. It should be either HORIZONTAL or VERTICAL"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">        mOrientation = orientation;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> TypedArray a = context.obtainStyledAttributes(ATTRS);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">        mDivider = a.getDrawable(<span class="number">0</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">        a.recycle();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * custom dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * 自定义分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     *</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> drawableId</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecycleViewDivider</span><span class="params">(Context context, <span class="keyword">int</span> orientation, <span class="keyword">int</span> drawableId)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>(context, orientation);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line">        mDivider = ContextCompat.getDrawable(context, drawableId);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//        mDividerHeight = mDivider.getIntrinsicHeight();</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">56</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">57</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">58</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">59</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * custom dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">60</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * 自定义分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">61</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     *</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">62</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">63</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> orientation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">64</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> dividerHeight</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">65</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> dividerColor</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">66</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">67</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecycleViewDivider</span><span class="params">(Context context, <span class="keyword">int</span> orientation, <span class="keyword">int</span> dividerHeight, <span class="keyword">int</span> dividerColor)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">68</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>(context, orientation);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">69</span></pre></td><td class="code"><pre><span class="line">        mDividerHeight = dividerHeight;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">70</span></pre></td><td class="code"><pre><span class="line">        mPaint = <span class="keyword">new</span> Paint(Paint.ANTI_ALIAS_FLAG);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">71</span></pre></td><td class="code"><pre><span class="line">        mPaint.setColor(dividerColor);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">72</span></pre></td><td class="code"><pre><span class="line">        mPaint.setStyle(Paint.Style.FILL);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">73</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">74</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">75</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">76</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// get item offset</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">77</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 获取 item 偏移量</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">78</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">79</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getItemOffsets</span><span class="params">(Rect outRect, View view, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">80</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">super</span>.getItemOffsets(outRect, view, parent, state);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">81</span></pre></td><td class="code"><pre><span class="line">        outRect.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, mDividerHeight);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">82</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">83</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">84</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// draw dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">85</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 绘制分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">86</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">87</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas c, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">88</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">super</span>.onDraw(c, parent, state);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">89</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (mOrientation == LinearLayoutManager.VERTICAL) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">90</span></pre></td><td class="code"><pre><span class="line">            drawVertical(c, parent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">91</span></pre></td><td class="code"><pre><span class="line">        &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">92</span></pre></td><td class="code"><pre><span class="line">            drawHorizontal(c, parent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">93</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">94</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">95</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">96</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// draw horizontal dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">97</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 绘制横向 item 分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">98</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawHorizontal</span><span class="params">(Canvas canvas, RecyclerView parent)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">99</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> left = parent.getPaddingLeft();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">100</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> right = parent.getMeasuredWidth() - parent.getPaddingRight();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">101</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childSize = parent.getChildCount();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">102</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childSize; i++) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">103</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> View child = parent.getChildAt(i);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">104</span></pre></td><td class="code"><pre><span class="line">            RecyclerView.LayoutParams layoutParams = (RecyclerView.LayoutParams) child.getLayoutParams();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">105</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> top = child.getBottom() + layoutParams.bottomMargin;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">106</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> bottom = top + mDividerHeight;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">107</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mDivider != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">108</span></pre></td><td class="code"><pre><span class="line">                mDivider.setBounds(left, top, right, bottom);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">109</span></pre></td><td class="code"><pre><span class="line">                mDivider.draw(canvas);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">110</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">111</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mPaint != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">112</span></pre></td><td class="code"><pre><span class="line">                canvas.drawRect(left, top, right, bottom, mPaint);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">113</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">114</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">115</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">116</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">117</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// draw vertical dividing line</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">118</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 绘制纵向 item 分割线</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">119</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawVertical</span><span class="params">(Canvas canvas, RecyclerView parent)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">120</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> top = parent.getPaddingTop();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">121</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> bottom = parent.getMeasuredHeight() - parent.getPaddingBottom();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">122</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childSize = parent.getChildCount();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">123</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childSize; i++) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">124</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> View child = parent.getChildAt(i);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">125</span></pre></td><td class="code"><pre><span class="line">            RecyclerView.LayoutParams layoutParams = (RecyclerView.LayoutParams) child.getLayoutParams();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">126</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> left = child.getRight() + layoutParams.rightMargin;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">127</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> right = left + mDividerHeight;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">128</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mDivider != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">129</span></pre></td><td class="code"><pre><span class="line">                mDivider.setBounds(left, top, right, bottom);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">130</span></pre></td><td class="code"><pre><span class="line">                mDivider.draw(canvas);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">131</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">132</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (mPaint != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">133</span></pre></td><td class="code"><pre><span class="line">                canvas.drawRect(left, top, right, bottom, mPaint);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">134</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">135</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">136</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">137</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<p>自定义的 drawable 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">size</span> <span class="attr">android:height</span>=<span class="string">"20dp"</span> /&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#ff992900"</span> /&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://blog.csdn.net/yancychas/article/details/77484659" target="_blank" rel="noopener">RecyclerView 设置分隔线的三种方法</a></li>
<li><a href="https://blog.csdn.net/lmj623565791/article/details/45059587" target="_blank" rel="noopener">Android RecyclerView 使用完全解析 体验艺术般的控件</a></li>
</ul>

	
	</div>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/3/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Ajax/">Ajax<span>9</span></a></li>
		
			<li><a href="/categories/AliPay/">AliPay<span>1</span></a></li>
		
			<li><a href="/categories/Android/">Android<span>14</span></a></li>
		
			<li><a href="/categories/AngularJS/">AngularJS<span>4</span></a></li>
		
			<li><a href="/categories/BackEnd/">BackEnd<span>5</span></a></li>
		
			<li><a href="/categories/Backbone/">Backbone<span>1</span></a></li>
		
			<li><a href="/categories/Bootstrap/">Bootstrap<span>2</span></a></li>
		
			<li><a href="/categories/C-C/">C/C++<span>1</span></a></li>
		
			<li><a href="/categories/Car/">Car<span>1</span></a></li>
		
			<li><a href="/categories/Css/">Css<span>9</span></a></li>
		
			<li><a href="/categories/Css3/">Css3<span>4</span></a></li>
		
			<li><a href="/categories/Database/">Database<span>4</span></a></li>
		
			<li><a href="/categories/Design/">Design<span>1</span></a></li>
		
			<li><a href="/categories/Flutter/">Flutter<span>1</span></a></li>
		
			<li><a href="/categories/Git/">Git<span>1</span></a></li>
		
			<li><a href="/categories/Golang/">Golang<span>1</span></a></li>
		
			<li><a href="/categories/Hadoop/">Hadoop<span>1</span></a></li>
		
			<li><a href="/categories/Hexo/">Hexo<span>3</span></a></li>
		
			<li><a href="/categories/Html/">Html<span>18</span></a></li>
		
			<li><a href="/categories/Java/">Java<span>17</span></a></li>
		
			<li><a href="/categories/JavaScript/">JavaScript<span>82</span></a></li>
		
			<li><a href="/categories/Linux/">Linux<span>8</span></a></li>
		
			<li><a href="/categories/Node-js/">Node.js<span>40</span></a></li>
		
			<li><a href="/categories/Powershell/">Powershell<span>1</span></a></li>
		
			<li><a href="/categories/Python/">Python<span>3</span></a></li>
		
			<li><a href="/categories/Read/">Read<span>9</span></a></li>
		
			<li><a href="/categories/Synology/">Synology<span>1</span></a></li>
		
			<li><a href="/categories/Testing/">Testing<span>4</span></a></li>
		
			<li><a href="/categories/Tools/">Tools<span>16</span></a></li>
		
			<li><a href="/categories/Vue-js/">Vue.js<span>10</span></a></li>
		
			<li><a href="/categories/WeChat/">WeChat<span>4</span></a></li>
		
			<li><a href="/categories/jQuery/">jQuery<span>5</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/Grammar/">Grammar<span>11</span></a></li>
		
			<li><a href="/tags/Bom/">Bom<span>10</span></a></li>
		
			<li><a href="/tags/Webpack/">Webpack<span>2</span></a></li>
		
			<li><a href="/tags/Library/">Library<span>7</span></a></li>
		
			<li><a href="/tags/Document/">Document<span>8</span></a></li>
		
			<li><a href="/tags/MySQL/">MySQL<span>1</span></a></li>
		
			<li><a href="/tags/MongoDB/">MongoDB<span>2</span></a></li>
		
			<li><a href="/tags/Karma/">Karma<span>1</span></a></li>
		
			<li><a href="/tags/Mocha/">Mocha<span>1</span></a></li>
		
			<li><a href="/tags/PhantomJs/">PhantomJs<span>1</span></a></li>
		
			<li><a href="/tags/django/">django<span>1</span></a></li>
		
			<li><a href="/tags/synology/">synology<span>1</span></a></li>
		
			<li><a href="/tags/Promise/">Promise<span>2</span></a></li>
		
			<li><a href="/tags/StdLib/">StdLib<span>11</span></a></li>
		
			<li><a href="/tags/JSP/">JSP<span>1</span></a></li>
		
			<li><a href="/tags/OOP/">OOP<span>9</span></a></li>
		
			<li><a href="/tags/Jasmine/">Jasmine<span>1</span></a></li>
		
			<li><a href="/tags/Performence/">Performence<span>1</span></a></li>
		
			<li><a href="/tags/Npm/">Npm<span>3</span></a></li>
		
			<li><a href="/tags/Chrome/">Chrome<span>2</span></a></li>
		
		
		   <li><a href="/tags">...<span>25</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2020/11/12/2020-11-10-django.starting/" ><i class="fa fa-file-o"></i>Django Starting</a>
      </li>
    
      <li>
        <a href="/2020/11/10/2020-11-10-docker.starting/" ><i class="fa fa-file-o"></i>Docker Starting</a>
      </li>
    
      <li>
        <a href="/2020/11/09/2020-11-09-android.sparseArray.arrayMap/" ><i class="fa fa-file-o"></i>性能优化:使用SparseArray和ArrayMap...</a>
      </li>
    
      <li>
        <a href="/2020/09/10/2020-09-10-synology/" ><i class="fa fa-file-o"></i>Synology</a>
      </li>
    
      <li>
        <a href="/2019/12/10/2019-12-10-android-compile-target-min-sdkversion/" ><i class="fa fa-file-o"></i>CompileSdkVersion、TargetSdk...</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/wzpan/freemind/" title="Freemind's Github repository." target="_blank"]);">Freemind</a></li>
	
		<li><i class="fa fa-github"></i><a href="https://github.com/JesseQiu" title="My Github account." target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-linkedin"></i><a href="https://jesseqiu.github.io/" title="My Linkin account." target="_blank"]);">My LinkedIn</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->


	</div>
  </div>

  <div class="container-narrow">
  <footer> 
<!-- 不蒜子统计 -->

    <span id="busuanzi_container_site_pv">
            本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
    </span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv" style='display:none'>
            本站访客数 <span id="busuanzi_value_site_uv"> </span>人
    </span>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<span>
  &copy; 2020 JesseChiu
  
</span>

<span>
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/" target="_blank" rel="noopener">Freemind</a>.    
</span>
 </footer>
</div> <!-- container-narrow -->

  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

  
</body>

   </html>
